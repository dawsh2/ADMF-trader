2025-04-24 22:46:52,525 - INFO - [DebugFlow] - Debug script starting
2025-04-24 22:46:52,525 - INFO - [DebugFlow] - === Starting Event Flow Debug ===
2025-04-24 22:46:52,525 - DEBUG - [src.core.events.event_bus] - Registered handler for FILL
2025-04-24 22:46:52,525 - DEBUG - [src.core.events.event_bus] - Registered handler for BAR
2025-04-24 22:46:52,525 - DEBUG - [src.core.events.event_bus] - Registered handler for ORDER
2025-04-24 22:46:52,525 - DEBUG - [src.core.events.event_bus] - Registered handler for ORDER
2025-04-24 22:46:52,525 - DEBUG - [src.core.events.event_bus] - Registered handler for FILL
2025-04-24 22:46:52,525 - DEBUG - [src.core.events.event_bus] - Registered handler for SIGNAL
2025-04-24 22:46:52,525 - DEBUG - [src.core.events.event_bus] - Registered handler for SIGNAL
2025-04-24 22:46:52,525 - DEBUG - [src.core.events.event_bus] - Registered handler for ORDER
2025-04-24 22:46:52,525 - DEBUG - [src.core.events.event_bus] - Registered handler for ORDER
2025-04-24 22:46:52,525 - DEBUG - [src.core.events.event_bus] - Registered handler for FILL
2025-04-24 22:46:52,525 - DEBUG - [src.core.events.event_bus] - Registered handler for FILL
2025-04-24 22:46:52,525 - DEBUG - [src.core.events.event_bus] - Registered handler for BAR
2025-04-24 22:46:52,525 - DEBUG - [src.core.events.event_bus] - Registered handler for SIGNAL
2025-04-24 22:46:52,525 - DEBUG - [src.core.events.event_bus] - Registered handler for ORDER
2025-04-24 22:46:52,525 - DEBUG - [src.core.events.event_bus] - Registered handler for FILL
2025-04-24 22:46:52,525 - DEBUG - [src.core.events.event_bus] - Registered handler for POSITION
2025-04-24 22:46:52,525 - DEBUG - [src.core.events.event_bus] - Registered handler for PORTFOLIO
2025-04-24 22:46:52,525 - DEBUG - [src.core.events.event_bus] - Registered handler for STRATEGY
2025-04-24 22:46:52,525 - DEBUG - [src.core.events.event_bus] - Registered handler for METRIC
2025-04-24 22:46:52,525 - DEBUG - [src.core.events.event_bus] - Registered handler for WEBSOCKET
2025-04-24 22:46:52,525 - DEBUG - [src.core.events.event_bus] - Registered handler for LIFECYCLE
2025-04-24 22:46:52,525 - DEBUG - [src.core.events.event_bus] - Registered handler for ERROR
2025-04-24 22:46:52,525 - DEBUG - [src.core.events.event_bus] - Registered handler for OPTIMIZATION
2025-04-24 22:46:52,525 - DEBUG - [src.core.events.event_bus] - Registered handler for FILTER
2025-04-24 22:46:52,525 - DEBUG - [src.core.events.event_bus] - Registered handler for REGIME
2025-04-24 22:46:52,525 - INFO - [DebugFlow] - Injecting first signal (BUY)
2025-04-24 22:46:52,526 - DEBUG - [DebugFlow] - EVENT_EMIT: SIGNAL #1 for AAPL value=1
2025-04-24 22:46:52,526 - DEBUG - [src.core.events.event_bus] - Emitting SIGNAL event (ID: e05bc7b3-f9b6-4f05-a805-b5838aa19a2d)
2025-04-24 22:46:52,526 - DEBUG - [src.risk.managers.simple] - Processing signal: 1 for AAPL at 100.00
2025-04-24 22:46:52,526 - DEBUG - [DebugFlow] - EVENT_EMIT: ORDER #1 BUY 100 AAPL @ 100.0
2025-04-24 22:46:52,526 - DEBUG - [src.core.events.event_bus] - Emitting ORDER event (ID: eeec958c-ceed-4cc0-b878-cb1b497281d3)
2025-04-24 22:46:52,526 - DEBUG - [DebugFlow] - CALL: SimulatedBroker.process_order START
2025-04-24 22:46:52,526 - DEBUG - [DebugFlow] - CALL: SimulatedBroker.process_order END
2025-04-24 22:46:52,526 - INFO - [src.execution.broker.broker_simulator] - Broker emitting fill event for AAPL
2025-04-24 22:46:52,526 - DEBUG - [DebugFlow] - EVENT_EMIT: FILL #1 BUY 100 AAPL @ 100.0
2025-04-24 22:46:52,526 - DEBUG - [src.core.events.event_bus] - Emitting FILL event (ID: 11419137-51ed-4886-8fe4-9ea31c702540)
2025-04-24 22:46:52,526 - DEBUG - [src.risk.portfolio.position] - Updating position AAPL: current=0, change=100, price=100.0
2025-04-24 22:46:52,526 - DEBUG - [src.risk.portfolio.position] - Opening new position: quantity=100, cost_basis=100.0
2025-04-24 22:46:52,526 - INFO - [src.risk.portfolio.portfolio] - Fill: BUY 100 AAPL @ 100.00, PnL: 0.00, Cash: 90000.00, Equity: 100000.00
2025-04-24 22:46:52,526 - DEBUG - [DebugFlow] - EVENT_EMIT: PORTFOLIO #1
2025-04-24 22:46:52,526 - DEBUG - [src.core.events.event_bus] - Emitting PORTFOLIO event (ID: 45a9da5d-64b1-4657-aee7-c17caf9e4391)
2025-04-24 22:46:52,526 - WARNING - [src.execution.order_manager] - No matching order found for fill: AAPL BUY
2025-04-24 22:46:52,526 - DEBUG - [src.execution.order_manager] - Fill 11419137-51ed-4886-8fe4-9ea31c702540 already processed, skipping
2025-04-24 22:46:52,526 - DEBUG - [DebugFlow] - CALL: PortfolioManager.on_fill START
2025-04-24 22:46:52,526 - DEBUG - [src.risk.portfolio.portfolio] - Fill 11419137-51ed-4886-8fe4-9ea31c702540 already processed by portfolio, skipping
2025-04-24 22:46:52,526 - DEBUG - [DebugFlow] - CALL: PortfolioManager.on_fill END
2025-04-24 22:46:52,526 - DEBUG - [DebugFlow] - CALL: SimulatedBroker.process_order START
2025-04-24 22:46:52,526 - DEBUG - [DebugFlow] - CALL: SimulatedBroker.process_order END
2025-04-24 22:46:52,526 - DEBUG - [DebugFlow] - EVENT_EMIT: PORTFOLIO #2
2025-04-24 22:46:52,526 - DEBUG - [src.core.events.event_bus] - Emitting PORTFOLIO event (ID: 5df9bf7b-8c7e-482d-bfa5-0ff2a3d6117d)
2025-04-24 22:46:52,526 - INFO - [src.execution.order_manager] - Updated order with fill: Order(aeea4951-7cfa-4d15-9577-9863242d51bc, AAPL, BUY, 100, FILLED)
2025-04-24 22:46:52,526 - DEBUG - [DebugFlow] - EVENT_EMIT: PORTFOLIO #3
2025-04-24 22:46:52,526 - DEBUG - [src.core.events.event_bus] - Emitting PORTFOLIO event (ID: 7112c7ce-47e5-4e24-833e-dc18eef3a704)
2025-04-24 22:46:52,526 - INFO - [src.execution.order_manager] - Created order: Order(aeea4951-7cfa-4d15-9577-9863242d51bc, AAPL, BUY, 100, FILLED)
2025-04-24 22:46:52,526 - DEBUG - [DebugFlow] - CALL: OrderManager.on_order START
2025-04-24 22:46:52,526 - DEBUG - [DebugFlow] - CALL: SimulatedBroker.process_order START
2025-04-24 22:46:52,526 - DEBUG - [DebugFlow] - CALL: SimulatedBroker.process_order END
2025-04-24 22:46:52,526 - DEBUG - [DebugFlow] - EVENT_EMIT: PORTFOLIO #4
2025-04-24 22:46:52,526 - DEBUG - [src.core.events.event_bus] - Emitting PORTFOLIO event (ID: 47a50542-4ab1-4554-83f5-2fd8f5bae1c3)
2025-04-24 22:46:52,526 - INFO - [src.execution.order_manager] - Updated order with fill: Order(07b838ff-40ee-44bc-9f7f-900733126770, AAPL, BUY, 100, FILLED)
2025-04-24 22:46:52,526 - DEBUG - [DebugFlow] - EVENT_EMIT: PORTFOLIO #5
2025-04-24 22:46:52,526 - DEBUG - [src.core.events.event_bus] - Emitting PORTFOLIO event (ID: 73d2fd97-288f-4cbf-af53-1ec488660a30)
2025-04-24 22:46:52,526 - INFO - [src.execution.order_manager] - Created order: Order(07b838ff-40ee-44bc-9f7f-900733126770, AAPL, BUY, 100, FILLED)
2025-04-24 22:46:52,526 - DEBUG - [DebugFlow] - CALL: OrderManager.on_order END
2025-04-24 22:46:52,526 - DEBUG - [src.execution.broker.broker_simulator] - Order 1b4e55b8-074b-41e7-a7b8-fa6d24ecf30a already processed by broker, skipping
2025-04-24 22:46:52,526 - INFO - [src.risk.managers.simple] - Created order: BUY 100 AAPL @ 100.00
2025-04-24 22:46:52,526 - DEBUG - [DebugFlow] - CALL: SimpleRiskManager.on_signal START
2025-04-24 22:46:52,526 - DEBUG - [src.risk.managers.simple] - Processing signal: 1 for AAPL at 100.00
2025-04-24 22:46:52,526 - DEBUG - [src.risk.managers.simple] - Skipping duplicate signal processing for AAPL_BUY_2025-04-24T22:46:52.525995
2025-04-24 22:46:52,526 - DEBUG - [DebugFlow] - CALL: SimpleRiskManager.on_signal END
2025-04-24 22:46:52,631 - INFO - [DebugFlow] - Injecting second signal (SELL)
2025-04-24 22:46:52,631 - DEBUG - [DebugFlow] - EVENT_EMIT: SIGNAL #2 for MSFT value=-1
2025-04-24 22:46:52,631 - DEBUG - [src.core.events.event_bus] - Emitting SIGNAL event (ID: 2ad893cd-d058-47ef-b090-cc27fbfb7063)
2025-04-24 22:46:52,631 - DEBUG - [src.risk.managers.simple] - Processing signal: -1 for MSFT at 120.00
2025-04-24 22:46:52,632 - DEBUG - [src.risk.managers.simple] - No position to sell for MSFT
2025-04-24 22:46:52,632 - DEBUG - [src.risk.managers.simple] - Signal for MSFT resulted in zero size, skipping
2025-04-24 22:46:52,632 - DEBUG - [DebugFlow] - CALL: SimpleRiskManager.on_signal START
2025-04-24 22:46:52,632 - DEBUG - [src.risk.managers.simple] - Processing signal: -1 for MSFT at 120.00
2025-04-24 22:46:52,632 - DEBUG - [src.risk.managers.simple] - No position to sell for MSFT
2025-04-24 22:46:52,632 - DEBUG - [src.risk.managers.simple] - Signal for MSFT resulted in zero size, skipping
2025-04-24 22:46:52,632 - DEBUG - [DebugFlow] - CALL: SimpleRiskManager.on_signal END
2025-04-24 22:46:52,737 - INFO - [DebugFlow] - === Event Summary ===
2025-04-24 22:46:52,737 - INFO - [DebugFlow] - Total events: 9
2025-04-24 22:46:52,737 - INFO - [DebugFlow] -   SIGNAL: 2
2025-04-24 22:46:52,737 - INFO - [DebugFlow] -   ORDER: 1
2025-04-24 22:46:52,737 - INFO - [DebugFlow] -   FILL: 1
2025-04-24 22:46:52,737 - INFO - [DebugFlow] -   OTHER: 5
2025-04-24 22:46:52,737 - INFO - [DebugFlow] - Portfolio cash: $90000.00
2025-04-24 22:46:52,737 - INFO - [DebugFlow] - Portfolio equity: $100000.00
2025-04-24 22:46:52,737 - INFO - [DebugFlow] - Orders created: 2
2025-04-24 22:46:52,737 - INFO - [DebugFlow] - Active orders: 0
2025-04-24 22:46:52,737 - INFO - [DebugFlow] - Order history: 2
2025-04-24 22:46:52,738 - INFO - [DebugFlow] - Event counts by type:
2025-04-24 22:46:52,738 - INFO - [DebugFlow] -   SIGNAL: 2
2025-04-24 22:46:52,738 - INFO - [DebugFlow] -   ORDER: 1
2025-04-24 22:46:52,738 - INFO - [DebugFlow] -   FILL: 1
2025-04-24 22:46:52,738 - INFO - [DebugFlow] -   PORTFOLIO: 5
2025-04-24 22:46:52,738 - DEBUG - [src.core.events.event_bus] - Handler for REGIME garbage collected, cleaning up
2025-04-24 22:46:52,738 - DEBUG - [src.core.events.event_bus] - Handler for FILTER garbage collected, cleaning up
2025-04-24 22:46:52,738 - DEBUG - [src.core.events.event_bus] - Handler for OPTIMIZATION garbage collected, cleaning up
2025-04-24 22:46:52,738 - DEBUG - [src.core.events.event_bus] - Handler for ERROR garbage collected, cleaning up
2025-04-24 22:46:52,738 - DEBUG - [src.core.events.event_bus] - Handler for LIFECYCLE garbage collected, cleaning up
2025-04-24 22:46:52,738 - DEBUG - [src.core.events.event_bus] - Handler for WEBSOCKET garbage collected, cleaning up
2025-04-24 22:46:52,738 - DEBUG - [src.core.events.event_bus] - Handler for METRIC garbage collected, cleaning up
2025-04-24 22:46:52,738 - DEBUG - [src.core.events.event_bus] - Handler for STRATEGY garbage collected, cleaning up
2025-04-24 22:46:52,738 - DEBUG - [src.core.events.event_bus] - Handler for PORTFOLIO garbage collected, cleaning up
2025-04-24 22:46:52,738 - DEBUG - [src.core.events.event_bus] - Handler for POSITION garbage collected, cleaning up
2025-04-24 22:46:52,738 - DEBUG - [src.core.events.event_bus] - Handler for FILL garbage collected, cleaning up
2025-04-24 22:46:52,738 - DEBUG - [src.core.events.event_bus] - Handler for ORDER garbage collected, cleaning up
2025-04-24 22:46:52,739 - DEBUG - [src.core.events.event_bus] - Handler for SIGNAL garbage collected, cleaning up
2025-04-24 22:46:52,739 - DEBUG - [src.core.events.event_bus] - Handler for BAR garbage collected, cleaning up
2025-04-24 22:46:52,739 - INFO - [DebugFlow] - Debug script completed successfully
