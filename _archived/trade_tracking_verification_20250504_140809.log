2025-05-04 14:08:09,914 - __main__ - INFO - Starting trade tracking verification test
2025-05-04 14:08:09,914 - __main__ - INFO - Loading configuration from config/mini_test.yaml
2025-05-04 14:08:09,915 - __main__ - INFO - Setting up system
2025-05-04 14:08:09,915 - src.core.system_bootstrap - INFO - Logging initialized at level INFO
2025-05-04 14:08:09,915 - src.core.system_bootstrap - INFO - Log file: backtest.log
2025-05-04 14:08:09,917 - src.core.system_bootstrap - INFO - Loaded configuration from config/mini_test.yaml
2025-05-04 14:08:09,917 - src.core.system_bootstrap - INFO - Event system initialized with native deduplication
2025-05-04 14:08:10,204 - src.core.events.event_emitters - INFO - Bar emitter bar_emitter started
2025-05-04 14:08:10,205 - src.core.utils.discovery - INFO - Registered component csv_data_source in registry
2025-05-04 14:08:10,205 - src.core.system_bootstrap - INFO - Data components initialized with source type: csv
2025-05-04 14:08:10,208 - src.execution.broker.broker_simulator - INFO - Simulated broker initialized
2025-05-04 14:08:10,208 - src.execution.order_manager - INFO - Order manager initialized
2025-05-04 14:08:10,208 - src.core.system_bootstrap - INFO - Execution components initialized
2025-05-04 14:08:10,211 - src.core.system_bootstrap - INFO - Using Enhanced Risk Manager (refactored architecture)
2025-05-04 14:08:10,211 - src.risk.managers.enhanced_risk_manager - INFO - Enhanced risk manager risk_manager_712389b8 initialized
2025-05-04 14:08:10,211 - src.core.system_bootstrap - INFO - Enhanced risk manager configured with position_sizing_method=fixed, position_size=100, max_position_size=1000
2025-05-04 14:08:10,211 - src.core.system_bootstrap - INFO - No signal interpreter needed with enhanced risk manager
2025-05-04 14:08:10,211 - src.core.system_bootstrap - INFO - Risk components initialized
2025-05-04 14:08:10,212 - src.core.system_bootstrap - INFO - Discovering strategy implementations...
2025-05-04 14:08:10,212 - src.core.utils.discovery - INFO - Registered component composite_regime in registry
2025-05-04 14:08:10,212 - src.core.utils.discovery - INFO - Registered component ensemble_strategy in registry
2025-05-04 14:08:10,212 - src.core.utils.discovery - INFO - Registered component ma_crossover in registry
2025-05-04 14:08:10,212 - src.core.utils.discovery - INFO - Registered component mean_reversion in registry
2025-05-04 14:08:10,212 - src.core.utils.discovery - INFO - Registered component regime_ensemble in registry
2025-05-04 14:08:10,212 - src.core.utils.discovery - INFO - Registered component simple_ma_crossover in registry
2025-05-04 14:08:10,212 - src.core.system_bootstrap - INFO - Discovered strategies: composite_regime, ensemble_strategy, ma_crossover, mean_reversion, regime_ensemble, simple_ma_crossover
2025-05-04 14:08:10,212 - src.core.system_bootstrap - INFO - Requested strategy: simple_ma_crossover
2025-05-04 14:08:10,213 - src.core.system_bootstrap - INFO - Available strategies in registry: ['composite_regime', 'ensemble_strategy', 'ma_crossover', 'mean_reversion', 'regime_ensemble', 'simple_ma_crossover']
2025-05-04 14:08:10,213 - src.strategy.implementations.simple_ma_crossover - INFO - MA Crossover strategy initialized with fast_window=5, slow_window=15
2025-05-04 14:08:10,213 - src.strategy.implementations.simple_ma_crossover - INFO - MA Crossover strategy configured with parameters: fast_window=5, slow_window=15
2025-05-04 14:08:10,213 - src.core.system_bootstrap - INFO - Strategy 'simple_ma_crossover' initialized successfully
2025-05-04 14:08:10,213 - src.core.system_bootstrap - INFO - Analytics components initialized
2025-05-04 14:08:10,213 - src.core.system_bootstrap - INFO - Registered enhanced risk manager with high signal priority
2025-05-04 14:08:10,213 - src.core.system_bootstrap - INFO - All components registered with event manager in optimal order
2025-05-04 14:08:10,213 - src.core.system_bootstrap - INFO - Re-registered portfolio fill handler with high priority
2025-05-04 14:08:10,213 - src.core.system_bootstrap - INFO - System bootstrap complete
2025-05-04 14:08:10,213 - __main__ - INFO - Running backtest
2025-05-04 14:08:10,213 - src.execution.backtest.backtest - INFO - Using timeframe from config: 1min
2025-05-04 14:08:10,216 - src.execution.backtest.backtest - INFO - Backtest setup complete
2025-05-04 14:08:10,216 - src.core.events.event_bus - INFO - Event bus reset complete
2025-05-04 14:08:10,216 - src.execution.backtest.backtest - INFO - Event bus reset
2025-05-04 14:08:10,216 - src.execution.backtest.backtest - INFO - Data handler reset
2025-05-04 14:08:10,216 - src.strategy.implementations.simple_ma_crossover - INFO - Simple MA Crossover strategy simple_ma_crossover reset
2025-05-04 14:08:10,216 - src.execution.backtest.backtest - INFO - Strategy reset
2025-05-04 14:08:10,216 - src.risk.managers.enhanced_risk_manager - INFO - CLEARING 0 PROCESSED RULE IDs
2025-05-04 14:08:10,216 - src.risk.managers.enhanced_risk_manager - INFO - After reset, processed_rule_ids size: 0
2025-05-04 14:08:10,216 - src.risk.managers.enhanced_risk_manager - INFO - Risk manager risk_manager_712389b8 reset completed
2025-05-04 14:08:10,216 - src.execution.backtest.backtest - INFO - Risk manager reset
2025-05-04 14:08:10,216 - src.execution.order_manager - INFO - Reset order manager
2025-05-04 14:08:10,216 - src.execution.backtest.backtest - INFO - Order manager reset
2025-05-04 14:08:10,216 - src.execution.broker.broker_simulator - INFO - Broker reset
2025-05-04 14:08:10,216 - src.execution.backtest.backtest - INFO - Broker reset
2025-05-04 14:08:10,216 - src.risk.portfolio.portfolio - INFO - Trade list reset - new empty list with ID: 4449406848
2025-05-04 14:08:10,216 - src.risk.portfolio.portfolio - INFO - Reset portfolio portfolio_24fcff31 to initial state with cash: $100000.00
2025-05-04 14:08:10,216 - src.execution.backtest.backtest - INFO - Portfolio reset
2025-05-04 14:08:10,216 - src.execution.backtest.backtest - INFO - Reset all components for backtest
2025-05-04 14:08:10,216 - src.execution.backtest.backtest - INFO - Loading data for symbols: ['MINI'] with timeframe: 1min
2025-05-04 14:08:10,216 - src.data.sources.csv_handler - INFO - CSVDataSource: Loading file ./data/MINI_1min.csv
2025-05-04 14:08:10,219 - src.data.sources.csv_handler - INFO - CSVDataSource: Loaded 48 rows
2025-05-04 14:08:10,220 - src.data.sources.csv_handler - INFO - CSVDataSource: Original timestamp sample: 2024-03-26 13:30:00
2025-05-04 14:08:10,221 - src.data.sources.csv_handler - INFO - CSVDataSource: Parsed timestamp sample: 2024-03-26 13:30:00
2025-05-04 14:08:10,221 - src.data.sources.csv_handler - INFO - CSVDataSource: Filtered for dates >= 2024-01-01 00:00:00
2025-05-04 14:08:10,221 - src.data.sources.csv_handler - INFO - CSVDataSource: Filtered for dates <= 2024-12-31 00:00:00
2025-05-04 14:08:10,223 - src.data.sources.csv_handler - INFO - CSVDataSource: Set timestamp as index
2025-05-04 14:08:10,224 - src.data.sources.csv_handler - INFO - CSVDataSource: Date range in data: 2024-03-26 13:30:00 to 2024-03-26 14:17:00
2025-05-04 14:08:10,224 - src.data.sources.csv_handler - INFO - CSVDataSource: Columns after mapping: ['open', 'high', 'low', 'close', 'volume', 'trade_count', 'vwap']
2025-05-04 14:08:10,224 - src.data.historical_data_handler - INFO - Loaded 48 bars for MINI from 2024-03-26 13:30:00 to 2024-03-26 14:17:00
2025-05-04 14:08:10,224 - src.execution.backtest.backtest - INFO - Starting backtest
2025-05-04 14:08:10,224 - src.strategy.implementations.simple_ma_crossover - INFO - SELL signal for MINI: fast MA crossed below slow MA
2025-05-04 14:08:10,224 - src.risk.managers.enhanced_risk_manager - INFO - Received signal: MINI direction=-1 at 521.12
2025-05-04 14:08:10,224 - src.risk.managers.enhanced_risk_manager - INFO - Trading decision: SELL 100.0 MINI @ 521.12, rule_id=MINI_SELL_OPEN_20240326133600, timestamp=2024-03-26 13:36:00, action=OPEN
2025-05-04 14:08:10,224 - src.core.events.event_bus - INFO - Order dedup key: MINI_SELL_OPEN_20240326133600
2025-05-04 14:08:10,224 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,224 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,224 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,224 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,224 - src.execution.order_manager - INFO - Converting trading decision to order: order_e1e39d9f (SELL 100.0 MINI @ 521.12)
2025-05-04 14:08:10,224 - src.execution.order_manager - INFO - Order order_e1e39d9f using quantity field 100.0 for size
2025-05-04 14:08:10,224 - src.execution.broker.broker_simulator - INFO - Broker processed order: SELL 100.0 MINI @ 521.12
2025-05-04 14:08:10,224 - src.execution.broker.broker_simulator - INFO - Fill event created with order_id: order_e1e39d9f
2025-05-04 14:08:10,224 - src.core.events.event_bus - INFO - Fill dedup key (order_id): order_e1e39d9f
2025-05-04 14:08:10,224 - src.execution.order_manager - INFO - Processing fill event for order_id: order_e1e39d9f
2025-05-04 14:08:10,224 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,225 - src.execution.order_manager - INFO - Processing fill event for order_id: order_e1e39d9f
2025-05-04 14:08:10,225 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,226 - src.risk.portfolio.portfolio - INFO - CRITICAL: Creating trade record a1963a8e-2635-490f-8193-24a6bea67753 for MINI SELL with PnL 0.00
2025-05-04 14:08:10,226 - src.risk.portfolio.portfolio - INFO - Trade list now contains 1 trades with ID 4449406848
2025-05-04 14:08:10,226 - src.risk.portfolio.portfolio - INFO - Latest trade added: a1963a8e-2635-490f-8193-24a6bea67753 for MINI
2025-05-04 14:08:10,226 - src.risk.portfolio.portfolio - INFO - Fill: SELL 100.0 MINI @ 520.60, PnL: 0.00, Cash: 152007.83, Equity: 99947.94
2025-05-04 14:08:10,226 - src.execution.order_manager - INFO - Processing fill event for order_id: order_e1e39d9f
2025-05-04 14:08:10,226 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,226 - src.execution.order_manager - INFO - Processing fill event for order_id: order_e1e39d9f
2025-05-04 14:08:10,226 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,226 - src.risk.managers.enhanced_risk_manager - INFO - Opening position: SELL 100.0 MINI @ 521.12, rule_id=MINI_SELL_OPEN_20240326133600
2025-05-04 14:08:10,226 - src.strategy.implementations.simple_ma_crossover - INFO - Signal emitted for MINI: -1, timestamp=2024-03-26 13:36:00
2025-05-04 14:08:10,227 - src.strategy.implementations.simple_ma_crossover - INFO - BUY signal for MINI: fast MA crossed above slow MA
2025-05-04 14:08:10,227 - src.risk.managers.enhanced_risk_manager - INFO - Received signal: MINI direction=1 at 521.085
2025-05-04 14:08:10,227 - src.risk.managers.enhanced_risk_manager - INFO - Trading decision: BUY 100.0 MINI @ 521.085, rule_id=MINI_BUY_CLOSE_20240326134300, timestamp=2024-03-26 13:43:00, action=CLOSE
2025-05-04 14:08:10,227 - src.core.events.event_bus - INFO - Order dedup key: MINI_BUY_CLOSE_20240326134300
2025-05-04 14:08:10,227 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,227 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,227 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,227 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,227 - src.execution.order_manager - INFO - Converting trading decision to order: order_caacdf1a (BUY 100.0 MINI @ 521.085)
2025-05-04 14:08:10,227 - src.execution.order_manager - INFO - Order order_caacdf1a using quantity field 100.0 for size
2025-05-04 14:08:10,227 - src.execution.broker.broker_simulator - INFO - Broker processed order: BUY 100.0 MINI @ 521.085
2025-05-04 14:08:10,227 - src.execution.broker.broker_simulator - INFO - Fill event created with order_id: order_caacdf1a
2025-05-04 14:08:10,227 - src.core.events.event_bus - INFO - Fill dedup key (order_id): order_caacdf1a
2025-05-04 14:08:10,227 - src.execution.order_manager - INFO - Processing fill event for order_id: order_caacdf1a
2025-05-04 14:08:10,227 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,227 - src.execution.order_manager - INFO - Processing fill event for order_id: order_caacdf1a
2025-05-04 14:08:10,227 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,227 - src.risk.portfolio.portfolio - INFO - CRITICAL: Creating trade record def2896f-e1bd-4f8a-ad08-50c602198dcf for MINI BUY with PnL -100.72
2025-05-04 14:08:10,227 - src.risk.portfolio.portfolio - INFO - Trade list now contains 2 trades with ID 4449406848
2025-05-04 14:08:10,227 - src.risk.portfolio.portfolio - INFO - Latest trade added: def2896f-e1bd-4f8a-ad08-50c602198dcf for MINI
2025-05-04 14:08:10,227 - src.risk.portfolio.portfolio - INFO - Fill: BUY 100.0 MINI @ 521.61, PnL: -100.72, Cash: 99795.06, Equity: 99795.06
2025-05-04 14:08:10,227 - src.execution.order_manager - INFO - Processing fill event for order_id: order_caacdf1a
2025-05-04 14:08:10,227 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,228 - src.execution.order_manager - INFO - Processing fill event for order_id: order_caacdf1a
2025-05-04 14:08:10,228 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,228 - src.risk.managers.enhanced_risk_manager - INFO - Closing position: BUY 100.0 MINI @ 521.085, rule_id=MINI_BUY_CLOSE_20240326134300
2025-05-04 14:08:10,228 - src.risk.managers.enhanced_risk_manager - INFO - Trading decision: BUY 100.0 MINI @ 521.085, rule_id=MINI_BUY_OPEN_20240326134300, timestamp=2024-03-26 13:43:00, action=OPEN
2025-05-04 14:08:10,228 - src.core.events.event_bus - INFO - Order dedup key: MINI_BUY_OPEN_20240326134300
2025-05-04 14:08:10,228 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,228 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,228 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,228 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,228 - src.execution.order_manager - INFO - Converting trading decision to order: order_813fdf33 (BUY 100.0 MINI @ 521.085)
2025-05-04 14:08:10,228 - src.execution.order_manager - INFO - Order order_813fdf33 using quantity field 100.0 for size
2025-05-04 14:08:10,228 - src.execution.broker.broker_simulator - INFO - Broker processed order: BUY 100.0 MINI @ 521.085
2025-05-04 14:08:10,228 - src.execution.broker.broker_simulator - INFO - Fill event created with order_id: order_813fdf33
2025-05-04 14:08:10,228 - src.core.events.event_bus - INFO - Fill dedup key (order_id): order_813fdf33
2025-05-04 14:08:10,228 - src.execution.order_manager - INFO - Processing fill event for order_id: order_813fdf33
2025-05-04 14:08:10,228 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,228 - src.execution.order_manager - INFO - Processing fill event for order_id: order_813fdf33
2025-05-04 14:08:10,228 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,228 - src.risk.portfolio.portfolio - INFO - CRITICAL: Creating trade record 8a42ca52-7d62-4080-9c5a-0981a552b9f7 for MINI BUY with PnL 0.00
2025-05-04 14:08:10,228 - src.risk.portfolio.portfolio - INFO - Trade list now contains 3 trades with ID 4449406848
2025-05-04 14:08:10,228 - src.risk.portfolio.portfolio - INFO - Latest trade added: 8a42ca52-7d62-4080-9c5a-0981a552b9f7 for MINI
2025-05-04 14:08:10,228 - src.risk.portfolio.portfolio - INFO - Fill: BUY 100.0 MINI @ 521.61, PnL: 0.00, Cash: 47582.29, Equity: 99742.90
2025-05-04 14:08:10,228 - src.execution.order_manager - INFO - Processing fill event for order_id: order_813fdf33
2025-05-04 14:08:10,228 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,229 - src.execution.order_manager - INFO - Processing fill event for order_id: order_813fdf33
2025-05-04 14:08:10,229 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,229 - src.risk.managers.enhanced_risk_manager - INFO - Opening position: BUY 100.0 MINI @ 521.085, rule_id=MINI_BUY_OPEN_20240326134300
2025-05-04 14:08:10,229 - src.strategy.implementations.simple_ma_crossover - INFO - Signal emitted for MINI: 1, timestamp=2024-03-26 13:43:00
2025-05-04 14:08:10,229 - src.strategy.implementations.simple_ma_crossover - INFO - SELL signal for MINI: fast MA crossed below slow MA
2025-05-04 14:08:10,229 - src.risk.managers.enhanced_risk_manager - INFO - Received signal: MINI direction=-1 at 521.09
2025-05-04 14:08:10,229 - src.risk.managers.enhanced_risk_manager - INFO - Trading decision: SELL 100.0 MINI @ 521.09, rule_id=MINI_SELL_CLOSE_20240326134700, timestamp=2024-03-26 13:47:00, action=CLOSE
2025-05-04 14:08:10,229 - src.core.events.event_bus - INFO - Order dedup key: MINI_SELL_CLOSE_20240326134700
2025-05-04 14:08:10,229 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,229 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,229 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,229 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,229 - src.execution.order_manager - INFO - Converting trading decision to order: order_a8997180 (SELL 100.0 MINI @ 521.09)
2025-05-04 14:08:10,229 - src.execution.order_manager - INFO - Order order_a8997180 using quantity field 100.0 for size
2025-05-04 14:08:10,229 - src.execution.broker.broker_simulator - INFO - Broker processed order: SELL 100.0 MINI @ 521.09
2025-05-04 14:08:10,229 - src.execution.broker.broker_simulator - INFO - Fill event created with order_id: order_a8997180
2025-05-04 14:08:10,229 - src.core.events.event_bus - INFO - Fill dedup key (order_id): order_a8997180
2025-05-04 14:08:10,229 - src.execution.order_manager - INFO - Processing fill event for order_id: order_a8997180
2025-05-04 14:08:10,229 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,229 - src.execution.order_manager - INFO - Processing fill event for order_id: order_a8997180
2025-05-04 14:08:10,230 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,230 - src.risk.portfolio.portfolio - INFO - CRITICAL: Creating trade record 7433c5af-207f-4a2e-be6f-63f3a67a7c58 for MINI SELL with PnL -103.72
2025-05-04 14:08:10,230 - src.risk.portfolio.portfolio - INFO - Trade list now contains 4 trades with ID 4449406848
2025-05-04 14:08:10,230 - src.risk.portfolio.portfolio - INFO - Latest trade added: 7433c5af-207f-4a2e-be6f-63f3a67a7c58 for MINI
2025-05-04 14:08:10,230 - src.risk.portfolio.portfolio - INFO - Fill: SELL 100.0 MINI @ 520.57, PnL: -103.72, Cash: 99587.12, Equity: 99587.12
2025-05-04 14:08:10,230 - src.execution.order_manager - INFO - Processing fill event for order_id: order_a8997180
2025-05-04 14:08:10,230 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,230 - src.execution.order_manager - INFO - Processing fill event for order_id: order_a8997180
2025-05-04 14:08:10,230 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,230 - src.risk.managers.enhanced_risk_manager - INFO - Closing position: SELL 100.0 MINI @ 521.09, rule_id=MINI_SELL_CLOSE_20240326134700
2025-05-04 14:08:10,230 - src.risk.managers.enhanced_risk_manager - INFO - Trading decision: SELL 100.0 MINI @ 521.09, rule_id=MINI_SELL_OPEN_20240326134700, timestamp=2024-03-26 13:47:00, action=OPEN
2025-05-04 14:08:10,230 - src.core.events.event_bus - INFO - Order dedup key: MINI_SELL_OPEN_20240326134700
2025-05-04 14:08:10,230 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,230 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,230 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,230 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,230 - src.execution.order_manager - INFO - Converting trading decision to order: order_ffa199d5 (SELL 100.0 MINI @ 521.09)
2025-05-04 14:08:10,230 - src.execution.order_manager - INFO - Order order_ffa199d5 using quantity field 100.0 for size
2025-05-04 14:08:10,230 - src.execution.broker.broker_simulator - INFO - Broker processed order: SELL 100.0 MINI @ 521.09
2025-05-04 14:08:10,230 - src.execution.broker.broker_simulator - INFO - Fill event created with order_id: order_ffa199d5
2025-05-04 14:08:10,230 - src.core.events.event_bus - INFO - Fill dedup key (order_id): order_ffa199d5
2025-05-04 14:08:10,230 - src.execution.order_manager - INFO - Processing fill event for order_id: order_ffa199d5
2025-05-04 14:08:10,230 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,230 - src.execution.order_manager - INFO - Processing fill event for order_id: order_ffa199d5
2025-05-04 14:08:10,231 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,231 - src.risk.portfolio.portfolio - INFO - CRITICAL: Creating trade record e6f01499-e79e-4881-8fe2-a33adc621101 for MINI SELL with PnL 0.00
2025-05-04 14:08:10,231 - src.risk.portfolio.portfolio - INFO - Trade list now contains 5 trades with ID 4449406848
2025-05-04 14:08:10,231 - src.risk.portfolio.portfolio - INFO - Latest trade added: e6f01499-e79e-4881-8fe2-a33adc621101 for MINI
2025-05-04 14:08:10,231 - src.risk.portfolio.portfolio - INFO - Fill: SELL 100.0 MINI @ 520.57, PnL: 0.00, Cash: 151591.96, Equity: 99535.07
2025-05-04 14:08:10,231 - src.execution.order_manager - INFO - Processing fill event for order_id: order_ffa199d5
2025-05-04 14:08:10,231 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,231 - src.execution.order_manager - INFO - Processing fill event for order_id: order_ffa199d5
2025-05-04 14:08:10,231 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,231 - src.risk.managers.enhanced_risk_manager - INFO - Opening position: SELL 100.0 MINI @ 521.09, rule_id=MINI_SELL_OPEN_20240326134700
2025-05-04 14:08:10,231 - src.strategy.implementations.simple_ma_crossover - INFO - Signal emitted for MINI: -1, timestamp=2024-03-26 13:47:00
2025-05-04 14:08:10,231 - src.strategy.implementations.simple_ma_crossover - INFO - BUY signal for MINI: fast MA crossed above slow MA
2025-05-04 14:08:10,231 - src.risk.managers.enhanced_risk_manager - INFO - Received signal: MINI direction=1 at 521.17
2025-05-04 14:08:10,231 - src.risk.managers.enhanced_risk_manager - INFO - Trading decision: BUY 100.0 MINI @ 521.17, rule_id=MINI_BUY_CLOSE_20240326134800, timestamp=2024-03-26 13:48:00, action=CLOSE
2025-05-04 14:08:10,231 - src.core.events.event_bus - INFO - Order dedup key: MINI_BUY_CLOSE_20240326134800
2025-05-04 14:08:10,231 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,231 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,231 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,231 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,231 - src.execution.order_manager - INFO - Converting trading decision to order: order_b91c6d9e (BUY 100.0 MINI @ 521.17)
2025-05-04 14:08:10,231 - src.execution.order_manager - INFO - Order order_b91c6d9e using quantity field 100.0 for size
2025-05-04 14:08:10,231 - src.execution.broker.broker_simulator - INFO - Broker processed order: BUY 100.0 MINI @ 521.17
2025-05-04 14:08:10,231 - src.execution.broker.broker_simulator - INFO - Fill event created with order_id: order_b91c6d9e
2025-05-04 14:08:10,231 - src.core.events.event_bus - INFO - Fill dedup key (order_id): order_b91c6d9e
2025-05-04 14:08:10,231 - src.execution.order_manager - INFO - Processing fill event for order_id: order_b91c6d9e
2025-05-04 14:08:10,231 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,232 - src.execution.order_manager - INFO - Processing fill event for order_id: order_b91c6d9e
2025-05-04 14:08:10,232 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,232 - src.risk.portfolio.portfolio - INFO - CRITICAL: Creating trade record 3b51a8ca-f7d1-4e23-8d25-f25fe50540b6 for MINI BUY with PnL -112.23
2025-05-04 14:08:10,232 - src.risk.portfolio.portfolio - INFO - Trade list now contains 6 trades with ID 4449406848
2025-05-04 14:08:10,232 - src.risk.portfolio.portfolio - INFO - Latest trade added: 3b51a8ca-f7d1-4e23-8d25-f25fe50540b6 for MINI
2025-05-04 14:08:10,232 - src.risk.portfolio.portfolio - INFO - Fill: BUY 100.0 MINI @ 521.69, PnL: -112.23, Cash: 99370.67, Equity: 99370.67
2025-05-04 14:08:10,232 - src.execution.order_manager - INFO - Processing fill event for order_id: order_b91c6d9e
2025-05-04 14:08:10,232 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,232 - src.execution.order_manager - INFO - Processing fill event for order_id: order_b91c6d9e
2025-05-04 14:08:10,232 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,232 - src.risk.managers.enhanced_risk_manager - INFO - Closing position: BUY 100.0 MINI @ 521.17, rule_id=MINI_BUY_CLOSE_20240326134800
2025-05-04 14:08:10,232 - src.risk.managers.enhanced_risk_manager - INFO - Trading decision: BUY 100.0 MINI @ 521.17, rule_id=MINI_BUY_OPEN_20240326134800, timestamp=2024-03-26 13:48:00, action=OPEN
2025-05-04 14:08:10,232 - src.core.events.event_bus - INFO - Order dedup key: MINI_BUY_OPEN_20240326134800
2025-05-04 14:08:10,232 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,232 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,232 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,232 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,232 - src.execution.order_manager - INFO - Converting trading decision to order: order_416057b7 (BUY 100.0 MINI @ 521.17)
2025-05-04 14:08:10,232 - src.execution.order_manager - INFO - Order order_416057b7 using quantity field 100.0 for size
2025-05-04 14:08:10,232 - src.execution.broker.broker_simulator - INFO - Broker processed order: BUY 100.0 MINI @ 521.17
2025-05-04 14:08:10,232 - src.execution.broker.broker_simulator - INFO - Fill event created with order_id: order_416057b7
2025-05-04 14:08:10,232 - src.core.events.event_bus - INFO - Fill dedup key (order_id): order_416057b7
2025-05-04 14:08:10,232 - src.execution.order_manager - INFO - Processing fill event for order_id: order_416057b7
2025-05-04 14:08:10,232 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,233 - src.execution.order_manager - INFO - Processing fill event for order_id: order_416057b7
2025-05-04 14:08:10,233 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,233 - src.risk.portfolio.portfolio - INFO - CRITICAL: Creating trade record 4f6716b8-ae72-4830-b32b-a68a75f4c648 for MINI BUY with PnL 0.00
2025-05-04 14:08:10,233 - src.risk.portfolio.portfolio - INFO - Trade list now contains 7 trades with ID 4449406848
2025-05-04 14:08:10,233 - src.risk.portfolio.portfolio - INFO - Latest trade added: 4f6716b8-ae72-4830-b32b-a68a75f4c648 for MINI
2025-05-04 14:08:10,233 - src.risk.portfolio.portfolio - INFO - Fill: BUY 100.0 MINI @ 521.69, PnL: 0.00, Cash: 47149.39, Equity: 99318.50
2025-05-04 14:08:10,233 - src.execution.order_manager - INFO - Processing fill event for order_id: order_416057b7
2025-05-04 14:08:10,233 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,233 - src.execution.order_manager - INFO - Processing fill event for order_id: order_416057b7
2025-05-04 14:08:10,233 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,233 - src.risk.managers.enhanced_risk_manager - INFO - Opening position: BUY 100.0 MINI @ 521.17, rule_id=MINI_BUY_OPEN_20240326134800
2025-05-04 14:08:10,233 - src.strategy.implementations.simple_ma_crossover - INFO - Signal emitted for MINI: 1, timestamp=2024-03-26 13:48:00
2025-05-04 14:08:10,233 - src.strategy.implementations.simple_ma_crossover - INFO - SELL signal for MINI: fast MA crossed below slow MA
2025-05-04 14:08:10,233 - src.risk.managers.enhanced_risk_manager - INFO - Received signal: MINI direction=-1 at 521.08
2025-05-04 14:08:10,234 - src.risk.managers.enhanced_risk_manager - INFO - Trading decision: SELL 100.0 MINI @ 521.08, rule_id=MINI_SELL_CLOSE_20240326135100, timestamp=2024-03-26 13:51:00, action=CLOSE
2025-05-04 14:08:10,234 - src.core.events.event_bus - INFO - Order dedup key: MINI_SELL_CLOSE_20240326135100
2025-05-04 14:08:10,234 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,234 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,234 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,234 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,234 - src.execution.order_manager - INFO - Converting trading decision to order: order_2578865f (SELL 100.0 MINI @ 521.08)
2025-05-04 14:08:10,234 - src.execution.order_manager - INFO - Order order_2578865f using quantity field 100.0 for size
2025-05-04 14:08:10,234 - src.execution.broker.broker_simulator - INFO - Broker processed order: SELL 100.0 MINI @ 521.08
2025-05-04 14:08:10,234 - src.execution.broker.broker_simulator - INFO - Fill event created with order_id: order_2578865f
2025-05-04 14:08:10,234 - src.core.events.event_bus - INFO - Fill dedup key (order_id): order_2578865f
2025-05-04 14:08:10,234 - src.execution.order_manager - INFO - Processing fill event for order_id: order_2578865f
2025-05-04 14:08:10,234 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,234 - src.execution.order_manager - INFO - Processing fill event for order_id: order_2578865f
2025-05-04 14:08:10,234 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,234 - src.risk.portfolio.portfolio - INFO - CRITICAL: Creating trade record 6a7b55dc-646d-4562-a786-419f9961e1aa for MINI SELL with PnL -113.22
2025-05-04 14:08:10,234 - src.risk.portfolio.portfolio - INFO - Trade list now contains 8 trades with ID 4449406848
2025-05-04 14:08:10,234 - src.risk.portfolio.portfolio - INFO - Latest trade added: 6a7b55dc-646d-4562-a786-419f9961e1aa for MINI
2025-05-04 14:08:10,234 - src.risk.portfolio.portfolio - INFO - Fill: SELL 100.0 MINI @ 520.56, PnL: -113.22, Cash: 99153.22, Equity: 99153.22
2025-05-04 14:08:10,234 - src.execution.order_manager - INFO - Processing fill event for order_id: order_2578865f
2025-05-04 14:08:10,234 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,234 - src.execution.order_manager - INFO - Processing fill event for order_id: order_2578865f
2025-05-04 14:08:10,234 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,234 - src.risk.managers.enhanced_risk_manager - INFO - Closing position: SELL 100.0 MINI @ 521.08, rule_id=MINI_SELL_CLOSE_20240326135100
2025-05-04 14:08:10,234 - src.risk.managers.enhanced_risk_manager - INFO - Trading decision: SELL 100.0 MINI @ 521.08, rule_id=MINI_SELL_OPEN_20240326135100, timestamp=2024-03-26 13:51:00, action=OPEN
2025-05-04 14:08:10,235 - src.core.events.event_bus - INFO - Order dedup key: MINI_SELL_OPEN_20240326135100
2025-05-04 14:08:10,235 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,235 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,235 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,235 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,235 - src.execution.order_manager - INFO - Converting trading decision to order: order_14c7fcc0 (SELL 100.0 MINI @ 521.08)
2025-05-04 14:08:10,235 - src.execution.order_manager - INFO - Order order_14c7fcc0 using quantity field 100.0 for size
2025-05-04 14:08:10,235 - src.execution.broker.broker_simulator - INFO - Broker processed order: SELL 100.0 MINI @ 521.08
2025-05-04 14:08:10,235 - src.execution.broker.broker_simulator - INFO - Fill event created with order_id: order_14c7fcc0
2025-05-04 14:08:10,235 - src.core.events.event_bus - INFO - Fill dedup key (order_id): order_14c7fcc0
2025-05-04 14:08:10,235 - src.execution.order_manager - INFO - Processing fill event for order_id: order_14c7fcc0
2025-05-04 14:08:10,235 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,235 - src.execution.order_manager - INFO - Processing fill event for order_id: order_14c7fcc0
2025-05-04 14:08:10,235 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,235 - src.risk.portfolio.portfolio - INFO - CRITICAL: Creating trade record d8b1c87d-2c98-4b11-b879-9e74e2224ca8 for MINI SELL with PnL 0.00
2025-05-04 14:08:10,235 - src.risk.portfolio.portfolio - INFO - Trade list now contains 9 trades with ID 4449406848
2025-05-04 14:08:10,235 - src.risk.portfolio.portfolio - INFO - Latest trade added: d8b1c87d-2c98-4b11-b879-9e74e2224ca8 for MINI
2025-05-04 14:08:10,235 - src.risk.portfolio.portfolio - INFO - Fill: SELL 100.0 MINI @ 520.56, PnL: 0.00, Cash: 151157.06, Equity: 99101.17
2025-05-04 14:08:10,235 - src.execution.order_manager - INFO - Processing fill event for order_id: order_14c7fcc0
2025-05-04 14:08:10,235 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,235 - src.execution.order_manager - INFO - Processing fill event for order_id: order_14c7fcc0
2025-05-04 14:08:10,235 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,235 - src.risk.managers.enhanced_risk_manager - INFO - Opening position: SELL 100.0 MINI @ 521.08, rule_id=MINI_SELL_OPEN_20240326135100
2025-05-04 14:08:10,235 - src.strategy.implementations.simple_ma_crossover - INFO - Signal emitted for MINI: -1, timestamp=2024-03-26 13:51:00
2025-05-04 14:08:10,236 - src.strategy.implementations.simple_ma_crossover - INFO - BUY signal for MINI: fast MA crossed above slow MA
2025-05-04 14:08:10,236 - src.risk.managers.enhanced_risk_manager - INFO - Received signal: MINI direction=1 at 521.145
2025-05-04 14:08:10,236 - src.risk.managers.enhanced_risk_manager - INFO - Trading decision: BUY 100.0 MINI @ 521.145, rule_id=MINI_BUY_CLOSE_20240326135600, timestamp=2024-03-26 13:56:00, action=CLOSE
2025-05-04 14:08:10,236 - src.core.events.event_bus - INFO - Order dedup key: MINI_BUY_CLOSE_20240326135600
2025-05-04 14:08:10,236 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,236 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,236 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,236 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,236 - src.execution.order_manager - INFO - Converting trading decision to order: order_0cdaa8e2 (BUY 100.0 MINI @ 521.145)
2025-05-04 14:08:10,236 - src.execution.order_manager - INFO - Order order_0cdaa8e2 using quantity field 100.0 for size
2025-05-04 14:08:10,236 - src.execution.broker.broker_simulator - INFO - Broker processed order: BUY 100.0 MINI @ 521.145
2025-05-04 14:08:10,236 - src.execution.broker.broker_simulator - INFO - Fill event created with order_id: order_0cdaa8e2
2025-05-04 14:08:10,236 - src.core.events.event_bus - INFO - Fill dedup key (order_id): order_0cdaa8e2
2025-05-04 14:08:10,236 - src.execution.order_manager - INFO - Processing fill event for order_id: order_0cdaa8e2
2025-05-04 14:08:10,236 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,236 - src.execution.order_manager - INFO - Processing fill event for order_id: order_0cdaa8e2
2025-05-04 14:08:10,236 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,236 - src.risk.portfolio.portfolio - INFO - CRITICAL: Creating trade record 007f290f-3e43-4e97-acb0-1f436b7f091c for MINI BUY with PnL -110.72
2025-05-04 14:08:10,236 - src.risk.portfolio.portfolio - INFO - Trade list now contains 10 trades with ID 4449406848
2025-05-04 14:08:10,236 - src.risk.portfolio.portfolio - INFO - Latest trade added: 007f290f-3e43-4e97-acb0-1f436b7f091c for MINI
2025-05-04 14:08:10,236 - src.risk.portfolio.portfolio - INFO - Fill: BUY 100.0 MINI @ 521.67, PnL: -110.72, Cash: 98938.28, Equity: 98938.28
2025-05-04 14:08:10,236 - src.execution.order_manager - INFO - Processing fill event for order_id: order_0cdaa8e2
2025-05-04 14:08:10,236 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,237 - src.execution.order_manager - INFO - Processing fill event for order_id: order_0cdaa8e2
2025-05-04 14:08:10,237 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,237 - src.risk.managers.enhanced_risk_manager - INFO - Closing position: BUY 100.0 MINI @ 521.145, rule_id=MINI_BUY_CLOSE_20240326135600
2025-05-04 14:08:10,237 - src.risk.managers.enhanced_risk_manager - INFO - Trading decision: BUY 100.0 MINI @ 521.145, rule_id=MINI_BUY_OPEN_20240326135600, timestamp=2024-03-26 13:56:00, action=OPEN
2025-05-04 14:08:10,237 - src.core.events.event_bus - INFO - Order dedup key: MINI_BUY_OPEN_20240326135600
2025-05-04 14:08:10,237 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,237 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,237 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,237 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,237 - src.execution.order_manager - INFO - Converting trading decision to order: order_a801d04f (BUY 100.0 MINI @ 521.145)
2025-05-04 14:08:10,237 - src.execution.order_manager - INFO - Order order_a801d04f using quantity field 100.0 for size
2025-05-04 14:08:10,237 - src.execution.broker.broker_simulator - INFO - Broker processed order: BUY 100.0 MINI @ 521.145
2025-05-04 14:08:10,237 - src.execution.broker.broker_simulator - INFO - Fill event created with order_id: order_a801d04f
2025-05-04 14:08:10,237 - src.core.events.event_bus - INFO - Fill dedup key (order_id): order_a801d04f
2025-05-04 14:08:10,237 - src.execution.order_manager - INFO - Processing fill event for order_id: order_a801d04f
2025-05-04 14:08:10,237 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,237 - src.execution.order_manager - INFO - Processing fill event for order_id: order_a801d04f
2025-05-04 14:08:10,237 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,237 - src.risk.portfolio.portfolio - INFO - CRITICAL: Creating trade record 825d9e06-f985-4b2f-9e69-1bf44f0ab73c for MINI BUY with PnL 0.00
2025-05-04 14:08:10,237 - src.risk.portfolio.portfolio - INFO - Trade list now contains 11 trades with ID 4449406848
2025-05-04 14:08:10,237 - src.risk.portfolio.portfolio - INFO - Latest trade added: 825d9e06-f985-4b2f-9e69-1bf44f0ab73c for MINI
2025-05-04 14:08:10,237 - src.risk.portfolio.portfolio - INFO - Fill: BUY 100.0 MINI @ 521.67, PnL: 0.00, Cash: 46719.50, Equity: 98886.11
2025-05-04 14:08:10,237 - src.execution.order_manager - INFO - Processing fill event for order_id: order_a801d04f
2025-05-04 14:08:10,237 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,238 - src.execution.order_manager - INFO - Processing fill event for order_id: order_a801d04f
2025-05-04 14:08:10,238 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,238 - src.risk.managers.enhanced_risk_manager - INFO - Opening position: BUY 100.0 MINI @ 521.145, rule_id=MINI_BUY_OPEN_20240326135600
2025-05-04 14:08:10,238 - src.strategy.implementations.simple_ma_crossover - INFO - Signal emitted for MINI: 1, timestamp=2024-03-26 13:56:00
2025-05-04 14:08:10,238 - src.strategy.implementations.simple_ma_crossover - INFO - SELL signal for MINI: fast MA crossed below slow MA
2025-05-04 14:08:10,238 - src.risk.managers.enhanced_risk_manager - INFO - Received signal: MINI direction=-1 at 521.25
2025-05-04 14:08:10,238 - src.risk.managers.enhanced_risk_manager - INFO - Trading decision: SELL 100.0 MINI @ 521.25, rule_id=MINI_SELL_CLOSE_20240326140300, timestamp=2024-03-26 14:03:00, action=CLOSE
2025-05-04 14:08:10,238 - src.core.events.event_bus - INFO - Order dedup key: MINI_SELL_CLOSE_20240326140300
2025-05-04 14:08:10,238 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,238 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,238 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,238 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,238 - src.execution.order_manager - INFO - Converting trading decision to order: order_be6f08ff (SELL 100.0 MINI @ 521.25)
2025-05-04 14:08:10,238 - src.execution.order_manager - INFO - Order order_be6f08ff using quantity field 100.0 for size
2025-05-04 14:08:10,238 - src.execution.broker.broker_simulator - INFO - Broker processed order: SELL 100.0 MINI @ 521.25
2025-05-04 14:08:10,238 - src.execution.broker.broker_simulator - INFO - Fill event created with order_id: order_be6f08ff
2025-05-04 14:08:10,238 - src.core.events.event_bus - INFO - Fill dedup key (order_id): order_be6f08ff
2025-05-04 14:08:10,238 - src.execution.order_manager - INFO - Processing fill event for order_id: order_be6f08ff
2025-05-04 14:08:10,238 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,239 - src.execution.order_manager - INFO - Processing fill event for order_id: order_be6f08ff
2025-05-04 14:08:10,239 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,239 - src.risk.portfolio.portfolio - INFO - CRITICAL: Creating trade record 2c3b0b19-e745-4bcd-af10-b4a30f7aa12a for MINI SELL with PnL -93.74
2025-05-04 14:08:10,239 - src.risk.portfolio.portfolio - INFO - Trade list now contains 12 trades with ID 4449406848
2025-05-04 14:08:10,239 - src.risk.portfolio.portfolio - INFO - Latest trade added: 2c3b0b19-e745-4bcd-af10-b4a30f7aa12a for MINI
2025-05-04 14:08:10,239 - src.risk.portfolio.portfolio - INFO - Fill: SELL 100.0 MINI @ 520.73, PnL: -93.74, Cash: 98740.30, Equity: 98740.30
2025-05-04 14:08:10,239 - src.execution.order_manager - INFO - Processing fill event for order_id: order_be6f08ff
2025-05-04 14:08:10,239 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,239 - src.execution.order_manager - INFO - Processing fill event for order_id: order_be6f08ff
2025-05-04 14:08:10,239 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,239 - src.risk.managers.enhanced_risk_manager - INFO - Closing position: SELL 100.0 MINI @ 521.25, rule_id=MINI_SELL_CLOSE_20240326140300
2025-05-04 14:08:10,239 - src.risk.managers.enhanced_risk_manager - INFO - Trading decision: SELL 100.0 MINI @ 521.25, rule_id=MINI_SELL_OPEN_20240326140300, timestamp=2024-03-26 14:03:00, action=OPEN
2025-05-04 14:08:10,239 - src.core.events.event_bus - INFO - Order dedup key: MINI_SELL_OPEN_20240326140300
2025-05-04 14:08:10,239 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,239 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,239 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,239 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,239 - src.execution.order_manager - INFO - Converting trading decision to order: order_3f4606b9 (SELL 100.0 MINI @ 521.25)
2025-05-04 14:08:10,239 - src.execution.order_manager - INFO - Order order_3f4606b9 using quantity field 100.0 for size
2025-05-04 14:08:10,239 - src.execution.broker.broker_simulator - INFO - Broker processed order: SELL 100.0 MINI @ 521.25
2025-05-04 14:08:10,239 - src.execution.broker.broker_simulator - INFO - Fill event created with order_id: order_3f4606b9
2025-05-04 14:08:10,239 - src.core.events.event_bus - INFO - Fill dedup key (order_id): order_3f4606b9
2025-05-04 14:08:10,239 - src.execution.order_manager - INFO - Processing fill event for order_id: order_3f4606b9
2025-05-04 14:08:10,239 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,240 - src.execution.order_manager - INFO - Processing fill event for order_id: order_3f4606b9
2025-05-04 14:08:10,240 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,240 - src.risk.portfolio.portfolio - INFO - CRITICAL: Creating trade record e26e4ebe-506a-4a4e-b918-a6760f51240a for MINI SELL with PnL 0.00
2025-05-04 14:08:10,240 - src.risk.portfolio.portfolio - INFO - Trade list now contains 13 trades with ID 4449406848
2025-05-04 14:08:10,240 - src.risk.portfolio.portfolio - INFO - Latest trade added: e26e4ebe-506a-4a4e-b918-a6760f51240a for MINI
2025-05-04 14:08:10,240 - src.risk.portfolio.portfolio - INFO - Fill: SELL 100.0 MINI @ 520.73, PnL: 0.00, Cash: 150761.10, Equity: 98688.23
2025-05-04 14:08:10,240 - src.execution.order_manager - INFO - Processing fill event for order_id: order_3f4606b9
2025-05-04 14:08:10,240 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,240 - src.execution.order_manager - INFO - Processing fill event for order_id: order_3f4606b9
2025-05-04 14:08:10,240 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,240 - src.risk.managers.enhanced_risk_manager - INFO - Opening position: SELL 100.0 MINI @ 521.25, rule_id=MINI_SELL_OPEN_20240326140300
2025-05-04 14:08:10,240 - src.strategy.implementations.simple_ma_crossover - INFO - Signal emitted for MINI: -1, timestamp=2024-03-26 14:03:00
2025-05-04 14:08:10,240 - src.strategy.implementations.simple_ma_crossover - INFO - BUY signal for MINI: fast MA crossed above slow MA
2025-05-04 14:08:10,240 - src.risk.managers.enhanced_risk_manager - INFO - Received signal: MINI direction=1 at 521.31
2025-05-04 14:08:10,240 - src.risk.managers.enhanced_risk_manager - INFO - Trading decision: BUY 100.0 MINI @ 521.31, rule_id=MINI_BUY_CLOSE_20240326140500, timestamp=2024-03-26 14:05:00, action=CLOSE
2025-05-04 14:08:10,240 - src.core.events.event_bus - INFO - Order dedup key: MINI_BUY_CLOSE_20240326140500
2025-05-04 14:08:10,240 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,241 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,241 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,241 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,241 - src.execution.order_manager - INFO - Converting trading decision to order: order_c9c73558 (BUY 100.0 MINI @ 521.31)
2025-05-04 14:08:10,241 - src.execution.order_manager - INFO - Order order_c9c73558 using quantity field 100.0 for size
2025-05-04 14:08:10,241 - src.execution.broker.broker_simulator - INFO - Broker processed order: BUY 100.0 MINI @ 521.31
2025-05-04 14:08:10,241 - src.execution.broker.broker_simulator - INFO - Fill event created with order_id: order_c9c73558
2025-05-04 14:08:10,241 - src.core.events.event_bus - INFO - Fill dedup key (order_id): order_c9c73558
2025-05-04 14:08:10,241 - src.execution.order_manager - INFO - Processing fill event for order_id: order_c9c73558
2025-05-04 14:08:10,241 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,241 - src.execution.order_manager - INFO - Processing fill event for order_id: order_c9c73558
2025-05-04 14:08:10,241 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,241 - src.risk.portfolio.portfolio - INFO - CRITICAL: Creating trade record eb7a3eea-8021-48a1-906a-fac75dbf6695 for MINI BUY with PnL -110.26
2025-05-04 14:08:10,241 - src.risk.portfolio.portfolio - INFO - Trade list now contains 14 trades with ID 4449406848
2025-05-04 14:08:10,241 - src.risk.portfolio.portfolio - INFO - Latest trade added: eb7a3eea-8021-48a1-906a-fac75dbf6695 for MINI
2025-05-04 14:08:10,241 - src.risk.portfolio.portfolio - INFO - Fill: BUY 100.0 MINI @ 521.83, PnL: -110.26, Cash: 98525.79, Equity: 98525.79
2025-05-04 14:08:10,241 - src.execution.order_manager - INFO - Processing fill event for order_id: order_c9c73558
2025-05-04 14:08:10,241 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,241 - src.execution.order_manager - INFO - Processing fill event for order_id: order_c9c73558
2025-05-04 14:08:10,241 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,241 - src.risk.managers.enhanced_risk_manager - INFO - Closing position: BUY 100.0 MINI @ 521.31, rule_id=MINI_BUY_CLOSE_20240326140500
2025-05-04 14:08:10,242 - src.risk.managers.enhanced_risk_manager - INFO - Trading decision: BUY 100.0 MINI @ 521.31, rule_id=MINI_BUY_OPEN_20240326140500, timestamp=2024-03-26 14:05:00, action=OPEN
2025-05-04 14:08:10,242 - src.core.events.event_bus - INFO - Order dedup key: MINI_BUY_OPEN_20240326140500
2025-05-04 14:08:10,242 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,242 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,242 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,242 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,242 - src.execution.order_manager - INFO - Converting trading decision to order: order_614c62b8 (BUY 100.0 MINI @ 521.31)
2025-05-04 14:08:10,242 - src.execution.order_manager - INFO - Order order_614c62b8 using quantity field 100.0 for size
2025-05-04 14:08:10,242 - src.execution.broker.broker_simulator - INFO - Broker processed order: BUY 100.0 MINI @ 521.31
2025-05-04 14:08:10,242 - src.execution.broker.broker_simulator - INFO - Fill event created with order_id: order_614c62b8
2025-05-04 14:08:10,242 - src.core.events.event_bus - INFO - Fill dedup key (order_id): order_614c62b8
2025-05-04 14:08:10,242 - src.execution.order_manager - INFO - Processing fill event for order_id: order_614c62b8
2025-05-04 14:08:10,242 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,242 - src.execution.order_manager - INFO - Processing fill event for order_id: order_614c62b8
2025-05-04 14:08:10,242 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,242 - src.risk.portfolio.portfolio - INFO - CRITICAL: Creating trade record 9a8fb153-0c4e-4c4d-a7b7-bcdfe967d2b7 for MINI BUY with PnL 0.00
2025-05-04 14:08:10,242 - src.risk.portfolio.portfolio - INFO - Trade list now contains 15 trades with ID 4449406848
2025-05-04 14:08:10,242 - src.risk.portfolio.portfolio - INFO - Latest trade added: 9a8fb153-0c4e-4c4d-a7b7-bcdfe967d2b7 for MINI
2025-05-04 14:08:10,242 - src.risk.portfolio.portfolio - INFO - Fill: BUY 100.0 MINI @ 521.83, PnL: 0.00, Cash: 46290.47, Equity: 98473.60
2025-05-04 14:08:10,242 - src.execution.order_manager - INFO - Processing fill event for order_id: order_614c62b8
2025-05-04 14:08:10,242 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,242 - src.execution.order_manager - INFO - Processing fill event for order_id: order_614c62b8
2025-05-04 14:08:10,242 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,243 - src.risk.managers.enhanced_risk_manager - INFO - Opening position: BUY 100.0 MINI @ 521.31, rule_id=MINI_BUY_OPEN_20240326140500
2025-05-04 14:08:10,243 - src.strategy.implementations.simple_ma_crossover - INFO - Signal emitted for MINI: 1, timestamp=2024-03-26 14:05:00
2025-05-04 14:08:10,243 - src.strategy.implementations.simple_ma_crossover - INFO - SELL signal for MINI: fast MA crossed below slow MA
2025-05-04 14:08:10,243 - src.risk.managers.enhanced_risk_manager - INFO - Received signal: MINI direction=-1 at 521.3
2025-05-04 14:08:10,243 - src.risk.managers.enhanced_risk_manager - INFO - Trading decision: SELL 100.0 MINI @ 521.3, rule_id=MINI_SELL_CLOSE_20240326140900, timestamp=2024-03-26 14:09:00, action=CLOSE
2025-05-04 14:08:10,243 - src.core.events.event_bus - INFO - Order dedup key: MINI_SELL_CLOSE_20240326140900
2025-05-04 14:08:10,243 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,243 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,243 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,243 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,243 - src.execution.order_manager - INFO - Converting trading decision to order: order_2ff83eb6 (SELL 100.0 MINI @ 521.3)
2025-05-04 14:08:10,243 - src.execution.order_manager - INFO - Order order_2ff83eb6 using quantity field 100.0 for size
2025-05-04 14:08:10,243 - src.execution.broker.broker_simulator - INFO - Broker processed order: SELL 100.0 MINI @ 521.3
2025-05-04 14:08:10,243 - src.execution.broker.broker_simulator - INFO - Fill event created with order_id: order_2ff83eb6
2025-05-04 14:08:10,243 - src.core.events.event_bus - INFO - Fill dedup key (order_id): order_2ff83eb6
2025-05-04 14:08:10,243 - src.execution.order_manager - INFO - Processing fill event for order_id: order_2ff83eb6
2025-05-04 14:08:10,243 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,243 - src.execution.order_manager - INFO - Processing fill event for order_id: order_2ff83eb6
2025-05-04 14:08:10,243 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,244 - src.risk.portfolio.portfolio - INFO - CRITICAL: Creating trade record 489e5d70-6d13-4020-90ce-1b5d59a0ece5 for MINI SELL with PnL -105.26
2025-05-04 14:08:10,244 - src.risk.portfolio.portfolio - INFO - Trade list now contains 16 trades with ID 4449406848
2025-05-04 14:08:10,244 - src.risk.portfolio.portfolio - INFO - Latest trade added: 489e5d70-6d13-4020-90ce-1b5d59a0ece5 for MINI
2025-05-04 14:08:10,244 - src.risk.portfolio.portfolio - INFO - Fill: SELL 100.0 MINI @ 520.78, PnL: -105.26, Cash: 98316.26, Equity: 98316.26
2025-05-04 14:08:10,244 - src.execution.order_manager - INFO - Processing fill event for order_id: order_2ff83eb6
2025-05-04 14:08:10,244 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,244 - src.execution.order_manager - INFO - Processing fill event for order_id: order_2ff83eb6
2025-05-04 14:08:10,244 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,244 - src.risk.managers.enhanced_risk_manager - INFO - Closing position: SELL 100.0 MINI @ 521.3, rule_id=MINI_SELL_CLOSE_20240326140900
2025-05-04 14:08:10,244 - src.risk.managers.enhanced_risk_manager - INFO - Trading decision: SELL 100.0 MINI @ 521.3, rule_id=MINI_SELL_OPEN_20240326140900, timestamp=2024-03-26 14:09:00, action=OPEN
2025-05-04 14:08:10,244 - src.core.events.event_bus - INFO - Order dedup key: MINI_SELL_OPEN_20240326140900
2025-05-04 14:08:10,244 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,244 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,244 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,244 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,244 - src.execution.order_manager - INFO - Converting trading decision to order: order_9928fbc5 (SELL 100.0 MINI @ 521.3)
2025-05-04 14:08:10,244 - src.execution.order_manager - INFO - Order order_9928fbc5 using quantity field 100.0 for size
2025-05-04 14:08:10,244 - src.execution.broker.broker_simulator - INFO - Broker processed order: SELL 100.0 MINI @ 521.3
2025-05-04 14:08:10,244 - src.execution.broker.broker_simulator - INFO - Fill event created with order_id: order_9928fbc5
2025-05-04 14:08:10,244 - src.core.events.event_bus - INFO - Fill dedup key (order_id): order_9928fbc5
2025-05-04 14:08:10,244 - src.execution.order_manager - INFO - Processing fill event for order_id: order_9928fbc5
2025-05-04 14:08:10,244 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,244 - src.execution.order_manager - INFO - Processing fill event for order_id: order_9928fbc5
2025-05-04 14:08:10,244 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,245 - src.risk.portfolio.portfolio - INFO - CRITICAL: Creating trade record 2bd250ad-0468-4d07-943b-123506149922 for MINI SELL with PnL 0.00
2025-05-04 14:08:10,245 - src.risk.portfolio.portfolio - INFO - Trade list now contains 17 trades with ID 4449406848
2025-05-04 14:08:10,245 - src.risk.portfolio.portfolio - INFO - Latest trade added: 2bd250ad-0468-4d07-943b-123506149922 for MINI
2025-05-04 14:08:10,245 - src.risk.portfolio.portfolio - INFO - Fill: SELL 100.0 MINI @ 520.78, PnL: 0.00, Cash: 150342.06, Equity: 98264.19
2025-05-04 14:08:10,245 - src.execution.order_manager - INFO - Processing fill event for order_id: order_9928fbc5
2025-05-04 14:08:10,245 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,245 - src.execution.order_manager - INFO - Processing fill event for order_id: order_9928fbc5
2025-05-04 14:08:10,245 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,245 - src.risk.managers.enhanced_risk_manager - INFO - Opening position: SELL 100.0 MINI @ 521.3, rule_id=MINI_SELL_OPEN_20240326140900
2025-05-04 14:08:10,245 - src.strategy.implementations.simple_ma_crossover - INFO - Signal emitted for MINI: -1, timestamp=2024-03-26 14:09:00
2025-05-04 14:08:10,245 - src.strategy.implementations.simple_ma_crossover - INFO - BUY signal for MINI: fast MA crossed above slow MA
2025-05-04 14:08:10,245 - src.risk.managers.enhanced_risk_manager - INFO - Received signal: MINI direction=1 at 521.3001
2025-05-04 14:08:10,245 - src.risk.managers.enhanced_risk_manager - INFO - Trading decision: BUY 100.0 MINI @ 521.3001, rule_id=MINI_BUY_CLOSE_20240326141300, timestamp=2024-03-26 14:13:00, action=CLOSE
2025-05-04 14:08:10,245 - src.core.events.event_bus - INFO - Order dedup key: MINI_BUY_CLOSE_20240326141300
2025-05-04 14:08:10,246 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,246 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,246 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,246 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,246 - src.execution.order_manager - INFO - Converting trading decision to order: order_5a99bd80 (BUY 100.0 MINI @ 521.3001)
2025-05-04 14:08:10,246 - src.execution.order_manager - INFO - Order order_5a99bd80 using quantity field 100.0 for size
2025-05-04 14:08:10,246 - src.execution.broker.broker_simulator - INFO - Broker processed order: BUY 100.0 MINI @ 521.3001
2025-05-04 14:08:10,246 - src.execution.broker.broker_simulator - INFO - Fill event created with order_id: order_5a99bd80
2025-05-04 14:08:10,246 - src.core.events.event_bus - INFO - Fill dedup key (order_id): order_5a99bd80
2025-05-04 14:08:10,246 - src.execution.order_manager - INFO - Processing fill event for order_id: order_5a99bd80
2025-05-04 14:08:10,246 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,246 - src.execution.order_manager - INFO - Processing fill event for order_id: order_5a99bd80
2025-05-04 14:08:10,246 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,246 - src.risk.portfolio.portfolio - INFO - CRITICAL: Creating trade record 75f01ed2-6f42-434b-8505-cefa349bcd2e for MINI BUY with PnL -104.27
2025-05-04 14:08:10,246 - src.risk.portfolio.portfolio - INFO - Trade list now contains 18 trades with ID 4449406848
2025-05-04 14:08:10,246 - src.risk.portfolio.portfolio - INFO - Latest trade added: 75f01ed2-6f42-434b-8505-cefa349bcd2e for MINI
2025-05-04 14:08:10,246 - src.risk.portfolio.portfolio - INFO - Fill: BUY 100.0 MINI @ 521.82, PnL: -104.27, Cash: 98107.73, Equity: 98107.73
2025-05-04 14:08:10,246 - src.execution.order_manager - INFO - Processing fill event for order_id: order_5a99bd80
2025-05-04 14:08:10,246 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,246 - src.execution.order_manager - INFO - Processing fill event for order_id: order_5a99bd80
2025-05-04 14:08:10,246 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,247 - src.risk.managers.enhanced_risk_manager - INFO - Closing position: BUY 100.0 MINI @ 521.3001, rule_id=MINI_BUY_CLOSE_20240326141300
2025-05-04 14:08:10,247 - src.risk.managers.enhanced_risk_manager - INFO - Trading decision: BUY 100.0 MINI @ 521.3001, rule_id=MINI_BUY_OPEN_20240326141300, timestamp=2024-03-26 14:13:00, action=OPEN
2025-05-04 14:08:10,247 - src.core.events.event_bus - INFO - Order dedup key: MINI_BUY_OPEN_20240326141300
2025-05-04 14:08:10,247 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,247 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,247 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,247 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,247 - src.execution.order_manager - INFO - Converting trading decision to order: order_2f895cbe (BUY 100.0 MINI @ 521.3001)
2025-05-04 14:08:10,247 - src.execution.order_manager - INFO - Order order_2f895cbe using quantity field 100.0 for size
2025-05-04 14:08:10,247 - src.execution.broker.broker_simulator - INFO - Broker processed order: BUY 100.0 MINI @ 521.3001
2025-05-04 14:08:10,247 - src.execution.broker.broker_simulator - INFO - Fill event created with order_id: order_2f895cbe
2025-05-04 14:08:10,247 - src.core.events.event_bus - INFO - Fill dedup key (order_id): order_2f895cbe
2025-05-04 14:08:10,247 - src.execution.order_manager - INFO - Processing fill event for order_id: order_2f895cbe
2025-05-04 14:08:10,247 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,247 - src.execution.order_manager - INFO - Processing fill event for order_id: order_2f895cbe
2025-05-04 14:08:10,247 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,247 - src.risk.portfolio.portfolio - INFO - CRITICAL: Creating trade record feabd78a-eb8a-428f-92d1-208fb739dfb9 for MINI BUY with PnL 0.00
2025-05-04 14:08:10,247 - src.risk.portfolio.portfolio - INFO - Trade list now contains 19 trades with ID 4449406848
2025-05-04 14:08:10,247 - src.risk.portfolio.portfolio - INFO - Latest trade added: feabd78a-eb8a-428f-92d1-208fb739dfb9 for MINI
2025-05-04 14:08:10,247 - src.risk.portfolio.portfolio - INFO - Fill: BUY 100.0 MINI @ 521.82, PnL: 0.00, Cash: 45873.41, Equity: 98055.55
2025-05-04 14:08:10,247 - src.execution.order_manager - INFO - Processing fill event for order_id: order_2f895cbe
2025-05-04 14:08:10,247 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,247 - src.execution.order_manager - INFO - Processing fill event for order_id: order_2f895cbe
2025-05-04 14:08:10,247 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,248 - src.risk.managers.enhanced_risk_manager - INFO - Opening position: BUY 100.0 MINI @ 521.3001, rule_id=MINI_BUY_OPEN_20240326141300
2025-05-04 14:08:10,248 - src.strategy.implementations.simple_ma_crossover - INFO - Signal emitted for MINI: 1, timestamp=2024-03-26 14:13:00
2025-05-04 14:08:10,248 - src.strategy.implementations.simple_ma_crossover - INFO - SELL signal for MINI: fast MA crossed below slow MA
2025-05-04 14:08:10,248 - src.risk.managers.enhanced_risk_manager - INFO - Received signal: MINI direction=-1 at 521.32
2025-05-04 14:08:10,248 - src.risk.managers.enhanced_risk_manager - INFO - Trading decision: SELL 100.0 MINI @ 521.32, rule_id=MINI_SELL_CLOSE_20240326141600, timestamp=2024-03-26 14:16:00, action=CLOSE
2025-05-04 14:08:10,248 - src.core.events.event_bus - INFO - Order dedup key: MINI_SELL_CLOSE_20240326141600
2025-05-04 14:08:10,248 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,248 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,248 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,248 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,248 - src.execution.order_manager - INFO - Converting trading decision to order: order_649f37cb (SELL 100.0 MINI @ 521.32)
2025-05-04 14:08:10,248 - src.execution.order_manager - INFO - Order order_649f37cb using quantity field 100.0 for size
2025-05-04 14:08:10,248 - src.execution.broker.broker_simulator - INFO - Broker processed order: SELL 100.0 MINI @ 521.32
2025-05-04 14:08:10,248 - src.execution.broker.broker_simulator - INFO - Fill event created with order_id: order_649f37cb
2025-05-04 14:08:10,248 - src.core.events.event_bus - INFO - Fill dedup key (order_id): order_649f37cb
2025-05-04 14:08:10,248 - src.execution.order_manager - INFO - Processing fill event for order_id: order_649f37cb
2025-05-04 14:08:10,248 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,248 - src.execution.order_manager - INFO - Processing fill event for order_id: order_649f37cb
2025-05-04 14:08:10,248 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,248 - src.risk.portfolio.portfolio - INFO - CRITICAL: Creating trade record f564bebd-f476-475d-938f-a087e5a6efc8 for MINI SELL with PnL -102.27
2025-05-04 14:08:10,248 - src.risk.portfolio.portfolio - INFO - Trade list now contains 20 trades with ID 4449406848
2025-05-04 14:08:10,249 - src.risk.portfolio.portfolio - INFO - Latest trade added: f564bebd-f476-475d-938f-a087e5a6efc8 for MINI
2025-05-04 14:08:10,249 - src.risk.portfolio.portfolio - INFO - Fill: SELL 100.0 MINI @ 520.80, PnL: -102.27, Cash: 97901.20, Equity: 97901.20
2025-05-04 14:08:10,249 - src.execution.order_manager - INFO - Processing fill event for order_id: order_649f37cb
2025-05-04 14:08:10,249 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,249 - src.execution.order_manager - INFO - Processing fill event for order_id: order_649f37cb
2025-05-04 14:08:10,249 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,249 - src.risk.managers.enhanced_risk_manager - INFO - Closing position: SELL 100.0 MINI @ 521.32, rule_id=MINI_SELL_CLOSE_20240326141600
2025-05-04 14:08:10,249 - src.risk.managers.enhanced_risk_manager - INFO - Trading decision: SELL 100.0 MINI @ 521.32, rule_id=MINI_SELL_OPEN_20240326141600, timestamp=2024-03-26 14:16:00, action=OPEN
2025-05-04 14:08:10,249 - src.core.events.event_bus - INFO - Order dedup key: MINI_SELL_OPEN_20240326141600
2025-05-04 14:08:10,249 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,249 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,249 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,249 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,249 - src.execution.order_manager - INFO - Converting trading decision to order: order_fc0fde76 (SELL 100.0 MINI @ 521.32)
2025-05-04 14:08:10,249 - src.execution.order_manager - INFO - Order order_fc0fde76 using quantity field 100.0 for size
2025-05-04 14:08:10,249 - src.execution.broker.broker_simulator - INFO - Broker processed order: SELL 100.0 MINI @ 521.32
2025-05-04 14:08:10,249 - src.execution.broker.broker_simulator - INFO - Fill event created with order_id: order_fc0fde76
2025-05-04 14:08:10,249 - src.core.events.event_bus - INFO - Fill dedup key (order_id): order_fc0fde76
2025-05-04 14:08:10,249 - src.execution.order_manager - INFO - Processing fill event for order_id: order_fc0fde76
2025-05-04 14:08:10,249 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,249 - src.execution.order_manager - INFO - Processing fill event for order_id: order_fc0fde76
2025-05-04 14:08:10,249 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,250 - src.risk.portfolio.portfolio - INFO - CRITICAL: Creating trade record 63cc81b0-e966-429b-acf5-c095350a6351 for MINI SELL with PnL 0.00
2025-05-04 14:08:10,250 - src.risk.portfolio.portfolio - INFO - Trade list now contains 21 trades with ID 4449406848
2025-05-04 14:08:10,250 - src.risk.portfolio.portfolio - INFO - Latest trade added: 63cc81b0-e966-429b-acf5-c095350a6351 for MINI
2025-05-04 14:08:10,250 - src.risk.portfolio.portfolio - INFO - Fill: SELL 100.0 MINI @ 520.80, PnL: 0.00, Cash: 149928.99, Equity: 97849.12
2025-05-04 14:08:10,250 - src.execution.order_manager - INFO - Processing fill event for order_id: order_fc0fde76
2025-05-04 14:08:10,250 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,250 - src.execution.order_manager - INFO - Processing fill event for order_id: order_fc0fde76
2025-05-04 14:08:10,250 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,250 - src.risk.managers.enhanced_risk_manager - INFO - Opening position: SELL 100.0 MINI @ 521.32, rule_id=MINI_SELL_OPEN_20240326141600
2025-05-04 14:08:10,250 - src.strategy.implementations.simple_ma_crossover - INFO - Signal emitted for MINI: -1, timestamp=2024-03-26 14:16:00
2025-05-04 14:08:10,250 - src.strategy.implementations.simple_ma_crossover - INFO - BUY signal for MINI: fast MA crossed above slow MA
2025-05-04 14:08:10,250 - src.risk.managers.enhanced_risk_manager - INFO - Received signal: MINI direction=1 at 521.38
2025-05-04 14:08:10,250 - src.risk.managers.enhanced_risk_manager - INFO - Trading decision: BUY 100.0 MINI @ 521.38, rule_id=MINI_BUY_CLOSE_20240326141700, timestamp=2024-03-26 14:17:00, action=CLOSE
2025-05-04 14:08:10,250 - src.core.events.event_bus - INFO - Order dedup key: MINI_BUY_CLOSE_20240326141700
2025-05-04 14:08:10,250 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,250 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,250 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,250 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,250 - src.execution.order_manager - INFO - Converting trading decision to order: order_f915bf5e (BUY 100.0 MINI @ 521.38)
2025-05-04 14:08:10,250 - src.execution.order_manager - INFO - Order order_f915bf5e using quantity field 100.0 for size
2025-05-04 14:08:10,250 - src.execution.broker.broker_simulator - INFO - Broker processed order: BUY 100.0 MINI @ 521.38
2025-05-04 14:08:10,250 - src.execution.broker.broker_simulator - INFO - Fill event created with order_id: order_f915bf5e
2025-05-04 14:08:10,250 - src.core.events.event_bus - INFO - Fill dedup key (order_id): order_f915bf5e
2025-05-04 14:08:10,250 - src.execution.order_manager - INFO - Processing fill event for order_id: order_f915bf5e
2025-05-04 14:08:10,250 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,251 - src.execution.order_manager - INFO - Processing fill event for order_id: order_f915bf5e
2025-05-04 14:08:10,251 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,251 - src.risk.portfolio.portfolio - INFO - CRITICAL: Creating trade record c17f57a8-3f07-4291-b248-f88576dd471a for MINI BUY with PnL -110.27
2025-05-04 14:08:10,251 - src.risk.portfolio.portfolio - INFO - Trade list now contains 22 trades with ID 4449406848
2025-05-04 14:08:10,251 - src.risk.portfolio.portfolio - INFO - Latest trade added: c17f57a8-3f07-4291-b248-f88576dd471a for MINI
2025-05-04 14:08:10,251 - src.risk.portfolio.portfolio - INFO - Fill: BUY 100.0 MINI @ 521.90, PnL: -110.27, Cash: 97686.66, Equity: 97686.66
2025-05-04 14:08:10,251 - src.execution.order_manager - INFO - Processing fill event for order_id: order_f915bf5e
2025-05-04 14:08:10,251 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,251 - src.execution.order_manager - INFO - Processing fill event for order_id: order_f915bf5e
2025-05-04 14:08:10,251 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,251 - src.risk.managers.enhanced_risk_manager - INFO - Closing position: BUY 100.0 MINI @ 521.38, rule_id=MINI_BUY_CLOSE_20240326141700
2025-05-04 14:08:10,251 - src.risk.managers.enhanced_risk_manager - INFO - Trading decision: BUY 100.0 MINI @ 521.38, rule_id=MINI_BUY_OPEN_20240326141700, timestamp=2024-03-26 14:17:00, action=OPEN
2025-05-04 14:08:10,251 - src.core.events.event_bus - INFO - Order dedup key: MINI_BUY_OPEN_20240326141700
2025-05-04 14:08:10,251 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,251 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,251 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,251 - src.execution.broker.broker_simulator - ERROR - Cannot process order without order_id
2025-05-04 14:08:10,251 - src.execution.order_manager - INFO - Converting trading decision to order: order_9735b4f2 (BUY 100.0 MINI @ 521.38)
2025-05-04 14:08:10,251 - src.execution.order_manager - INFO - Order order_9735b4f2 using quantity field 100.0 for size
2025-05-04 14:08:10,251 - src.execution.broker.broker_simulator - INFO - Broker processed order: BUY 100.0 MINI @ 521.38
2025-05-04 14:08:10,252 - src.execution.broker.broker_simulator - INFO - Fill event created with order_id: order_9735b4f2
2025-05-04 14:08:10,252 - src.core.events.event_bus - INFO - Fill dedup key (order_id): order_9735b4f2
2025-05-04 14:08:10,252 - src.execution.order_manager - INFO - Processing fill event for order_id: order_9735b4f2
2025-05-04 14:08:10,252 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,252 - src.execution.order_manager - INFO - Processing fill event for order_id: order_9735b4f2
2025-05-04 14:08:10,252 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,252 - src.risk.portfolio.portfolio - INFO - CRITICAL: Creating trade record c9d4f1ed-3d60-46a7-8c99-cd965c106ed0 for MINI BUY with PnL 0.00
2025-05-04 14:08:10,252 - src.risk.portfolio.portfolio - INFO - Trade list now contains 23 trades with ID 4449406848
2025-05-04 14:08:10,252 - src.risk.portfolio.portfolio - INFO - Latest trade added: c9d4f1ed-3d60-46a7-8c99-cd965c106ed0 for MINI
2025-05-04 14:08:10,252 - src.risk.portfolio.portfolio - INFO - Fill: BUY 100.0 MINI @ 521.90, PnL: 0.00, Cash: 45444.33, Equity: 97634.47
2025-05-04 14:08:10,252 - src.execution.order_manager - INFO - Processing fill event for order_id: order_9735b4f2
2025-05-04 14:08:10,252 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,252 - src.execution.order_manager - INFO - Processing fill event for order_id: order_9735b4f2
2025-05-04 14:08:10,252 - src.core.events.event_bus - ERROR - Error in handler handle_fill: 'Event' object has no attribute 'get_price'
Traceback (most recent call last):
  File "/Users/daws/ADMF-trader/src/core/events/event_bus.py", line 377, in _process_event
    handler(event)
    ~~~~~~~^^^^^^^
  File "/Users/daws/ADMF-trader/src/execution/order_manager.py", line 334, in handle_fill
    price = fill_data.get('price', fill_event.get_price())
                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'get_price'
2025-05-04 14:08:10,252 - src.risk.managers.enhanced_risk_manager - INFO - Opening position: BUY 100.0 MINI @ 521.38, rule_id=MINI_BUY_OPEN_20240326141700
2025-05-04 14:08:10,252 - src.strategy.implementations.simple_ma_crossover - INFO - Signal emitted for MINI: 1, timestamp=2024-03-26 14:17:00
2025-05-04 14:08:10,252 - src.execution.backtest.backtest - INFO - Backtest completed after 49 iterations
2025-05-04 14:08:10,252 - src.risk.portfolio.portfolio - INFO - === TRADE TRACKING DEBUG ===
2025-05-04 14:08:10,253 - src.risk.portfolio.portfolio - INFO - Portfolio trade list ID: 4449406848
2025-05-04 14:08:10,253 - src.risk.portfolio.portfolio - INFO - Trade count: 23
2025-05-04 14:08:10,253 - src.risk.portfolio.portfolio - INFO - First trade: a1963a8e-2635-490f-8193-24a6bea67753 - MINI
2025-05-04 14:08:10,253 - src.risk.portfolio.portfolio - INFO - Last trade: c9d4f1ed-3d60-46a7-8c99-cd965c106ed0 - MINI
2025-05-04 14:08:10,253 - src.risk.portfolio.portfolio - INFO - Total PnL from trades: -1166.68
2025-05-04 14:08:10,253 - src.risk.portfolio.portfolio - INFO - === END TRADE TRACKING DEBUG ===
2025-05-04 14:08:10,253 - src.risk.portfolio.portfolio - INFO - === TRADE TRACKING DEBUG ===
2025-05-04 14:08:10,253 - src.risk.portfolio.portfolio - INFO - Portfolio trade list ID: 4449406848
2025-05-04 14:08:10,253 - src.risk.portfolio.portfolio - INFO - Trade count: 23
2025-05-04 14:08:10,253 - src.risk.portfolio.portfolio - INFO - First trade: a1963a8e-2635-490f-8193-24a6bea67753 - MINI
2025-05-04 14:08:10,253 - src.risk.portfolio.portfolio - INFO - Last trade: c9d4f1ed-3d60-46a7-8c99-cd965c106ed0 - MINI
2025-05-04 14:08:10,253 - src.risk.portfolio.portfolio - INFO - Total PnL from trades: -1166.68
2025-05-04 14:08:10,254 - src.risk.portfolio.portfolio - INFO - === END TRADE TRACKING DEBUG ===
2025-05-04 14:08:10,254 - src.risk.portfolio.portfolio - INFO - get_recent_trades called, self.trades has 23 items
2025-05-04 14:08:10,254 - src.risk.portfolio.portfolio - INFO - Trade list object ID: 4449406848
2025-05-04 14:08:10,254 - src.risk.portfolio.portfolio - INFO - First trade: {'id': 'a1963a8e-2635-490f-8193-24a6bea67753', 'timestamp': datetime.datetime(2025, 5, 4, 14, 8, 10, 224905), 'symbol': 'MINI', 'direction': 'SELL', 'quantity': 100.0, 'size': 100.0, 'price': 520.59888, 'fill_price': 520.59888, 'commission': 52.059888, 'pnl': 0.0, 'realized_pnl': 0.0, 'entry_time': datetime.datetime(2025, 5, 4, 14, 8, 10, 224905), 'exit_time': datetime.datetime(2025, 5, 4, 14, 8, 10, 224905), 'entry_price': 520.59888, 'exit_price': 520.59888, 'trade_value': 52059.888}
2025-05-04 14:08:10,254 - src.risk.portfolio.portfolio - INFO - Last trade: {'id': 'c9d4f1ed-3d60-46a7-8c99-cd965c106ed0', 'timestamp': datetime.datetime(2025, 5, 4, 14, 8, 10, 251981), 'symbol': 'MINI', 'direction': 'BUY', 'quantity': 100.0, 'size': 100.0, 'price': 521.9013799999999, 'fill_price': 521.9013799999999, 'commission': 52.19013799999999, 'pnl': 0.0, 'realized_pnl': 0.0, 'entry_time': datetime.datetime(2025, 5, 4, 14, 8, 10, 251981), 'exit_time': datetime.datetime(2025, 5, 4, 14, 8, 10, 251981), 'entry_price': 521.9013799999999, 'exit_price': 521.9013799999999, 'trade_value': 52190.13799999999}
2025-05-04 14:08:10,254 - src.risk.portfolio.portfolio - INFO - Returning 23 validated trades
2025-05-04 14:08:10,254 - src.execution.backtest.backtest - INFO - Collected 23 trades from portfolio for reporting
2025-05-04 14:08:10,254 - src.execution.backtest.backtest - INFO - First trade sample: MINI SELL @ 520.59888
2025-05-04 14:08:10,254 - src.execution.backtest.backtest - INFO - Last trade sample: MINI BUY @ 521.9013799999999
2025-05-04 14:08:10,254 - src.execution.backtest.backtest - INFO - Trade stats: 23 trades, 0 wins, 11 losses
2025-05-04 14:08:10,254 - src.execution.backtest.backtest - INFO - PnL sum: -1166.68
2025-05-04 14:08:10,254 - src.execution.backtest.backtest - INFO - Min PnL: -113.22, Max PnL: 0.00
2025-05-04 14:08:10,254 - src.execution.backtest.backtest - INFO - Stored 23 trades in results dictionary with ID 4449361216
2025-05-04 14:08:10,254 - src.execution.backtest.backtest - INFO - Performance calculator configured with 23 trades
2025-05-04 14:08:10,254 - src.analytics.performance.calculator - INFO - Performance calculator: Processing 23 trades and equity curve with 289 points
2025-05-04 14:08:10,254 - src.analytics.performance.calculator - INFO - Sample trade: {'id': 'a1963a8e-2635-490f-8193-24a6bea67753', 'timestamp': datetime.datetime(2025, 5, 4, 14, 8, 10, 224905), 'symbol': 'MINI', 'direction': 'SELL', 'quantity': 100.0, 'size': 100.0, 'price': 520.59888, 'fill_price': 520.59888, 'commission': 52.059888, 'pnl': 0.0, 'realized_pnl': 0.0, 'entry_time': datetime.datetime(2025, 5, 4, 14, 8, 10, 224905), 'exit_time': datetime.datetime(2025, 5, 4, 14, 8, 10, 224905), 'entry_price': 520.59888, 'exit_price': 520.59888, 'trade_value': 52059.888}
2025-05-04 14:08:10,254 - src.analytics.performance.calculator - INFO - Total PnL from trades: -1166.68
2025-05-04 14:08:10,254 - src.analytics.performance.calculator - INFO - Trades with PnL field: 23 out of 23
2025-05-04 14:08:10,254 - src.analytics.metrics.functional - INFO - Calculating metrics for 23 trades and 289 equity points
2025-05-04 14:08:10,255 - src.analytics.metrics.functional - INFO - Win rate calculation: 0 wins out of 23 valid trades
2025-05-04 14:08:10,255 - src.analytics.metrics.functional - INFO - Profit factor calculation: gross profit=0.00, gross loss=1166.68
2025-05-04 14:08:10,256 - src.execution.backtest.backtest - INFO - Calculated performance metrics for 23 trades
2025-05-04 14:08:10,256 - src.analytics.performance.calculator - INFO - Performance calculator: Processing 23 trades and equity curve with 289 points
2025-05-04 14:08:10,256 - src.analytics.performance.calculator - INFO - Sample trade: {'id': 'a1963a8e-2635-490f-8193-24a6bea67753', 'timestamp': datetime.datetime(2025, 5, 4, 14, 8, 10, 224905), 'symbol': 'MINI', 'direction': 'SELL', 'quantity': 100.0, 'size': 100.0, 'price': 520.59888, 'fill_price': 520.59888, 'commission': 52.059888, 'pnl': 0.0, 'realized_pnl': 0.0, 'entry_time': datetime.datetime(2025, 5, 4, 14, 8, 10, 224905), 'exit_time': datetime.datetime(2025, 5, 4, 14, 8, 10, 224905), 'entry_price': 520.59888, 'exit_price': 520.59888, 'trade_value': 52059.888}
2025-05-04 14:08:10,256 - src.analytics.performance.calculator - INFO - Total PnL from trades: -1166.68
2025-05-04 14:08:10,256 - src.analytics.performance.calculator - INFO - Trades with PnL field: 23 out of 23
2025-05-04 14:08:10,256 - src.analytics.metrics.functional - INFO - Calculating metrics for 23 trades and 289 equity points
2025-05-04 14:08:10,256 - src.analytics.metrics.functional - INFO - Win rate calculation: 0 wins out of 23 valid trades
2025-05-04 14:08:10,256 - src.analytics.metrics.functional - INFO - Profit factor calculation: gross profit=0.00, gross loss=1166.68
2025-05-04 14:08:10,257 - src.analytics.performance.calculator - INFO - Performance calculator: Processing 23 trades and equity curve with 289 points
2025-05-04 14:08:10,257 - src.analytics.performance.calculator - INFO - Sample trade: {'id': 'a1963a8e-2635-490f-8193-24a6bea67753', 'timestamp': datetime.datetime(2025, 5, 4, 14, 8, 10, 224905), 'symbol': 'MINI', 'direction': 'SELL', 'quantity': 100.0, 'size': 100.0, 'price': 520.59888, 'fill_price': 520.59888, 'commission': 52.059888, 'pnl': 0.0, 'realized_pnl': 0.0, 'entry_time': datetime.datetime(2025, 5, 4, 14, 8, 10, 224905), 'exit_time': datetime.datetime(2025, 5, 4, 14, 8, 10, 224905), 'entry_price': 520.59888, 'exit_price': 520.59888, 'trade_value': 52059.888}
2025-05-04 14:08:10,257 - src.analytics.performance.calculator - INFO - Total PnL from trades: -1166.68
2025-05-04 14:08:10,257 - src.analytics.performance.calculator - INFO - Trades with PnL field: 23 out of 23
2025-05-04 14:08:10,257 - src.analytics.metrics.functional - INFO - Calculating metrics for 23 trades and 289 equity points
2025-05-04 14:08:10,257 - src.analytics.metrics.functional - INFO - Win rate calculation: 0 wins out of 23 valid trades
2025-05-04 14:08:10,257 - src.analytics.metrics.functional - INFO - Profit factor calculation: gross profit=0.00, gross loss=1166.68
2025-05-04 14:08:10,262 - src.risk.portfolio.portfolio - INFO - get_recent_trades called, self.trades has 23 items
2025-05-04 14:08:10,262 - src.risk.portfolio.portfolio - INFO - Trade list object ID: 4449406848
2025-05-04 14:08:10,262 - src.risk.portfolio.portfolio - INFO - First trade: {'id': 'a1963a8e-2635-490f-8193-24a6bea67753', 'timestamp': datetime.datetime(2025, 5, 4, 14, 8, 10, 224905), 'symbol': 'MINI', 'direction': 'SELL', 'quantity': 100.0, 'size': 100.0, 'price': 520.59888, 'fill_price': 520.59888, 'commission': 52.059888, 'pnl': 0.0, 'realized_pnl': 0.0, 'entry_time': datetime.datetime(2025, 5, 4, 14, 8, 10, 224905), 'exit_time': datetime.datetime(2025, 5, 4, 14, 8, 10, 224905), 'entry_price': 520.59888, 'exit_price': 520.59888, 'trade_value': 52059.888}
2025-05-04 14:08:10,262 - src.risk.portfolio.portfolio - INFO - Last trade: {'id': 'c9d4f1ed-3d60-46a7-8c99-cd965c106ed0', 'timestamp': datetime.datetime(2025, 5, 4, 14, 8, 10, 251981), 'symbol': 'MINI', 'direction': 'BUY', 'quantity': 100.0, 'size': 100.0, 'price': 521.9013799999999, 'fill_price': 521.9013799999999, 'commission': 52.19013799999999, 'pnl': 0.0, 'realized_pnl': 0.0, 'entry_time': datetime.datetime(2025, 5, 4, 14, 8, 10, 251981), 'exit_time': datetime.datetime(2025, 5, 4, 14, 8, 10, 251981), 'entry_price': 521.9013799999999, 'exit_price': 521.9013799999999, 'trade_value': 52190.13799999999}
2025-05-04 14:08:10,262 - src.risk.portfolio.portfolio - INFO - Returning 23 validated trades
2025-05-04 14:08:10,262 - src.execution.backtest.backtest - INFO - Backtest complete
2025-05-04 14:08:10,262 - src.risk.portfolio.portfolio - INFO - get_recent_trades called, self.trades has 23 items
2025-05-04 14:08:10,262 - src.risk.portfolio.portfolio - INFO - Trade list object ID: 4449406848
2025-05-04 14:08:10,262 - src.risk.portfolio.portfolio - INFO - First trade: {'id': 'a1963a8e-2635-490f-8193-24a6bea67753', 'timestamp': datetime.datetime(2025, 5, 4, 14, 8, 10, 224905), 'symbol': 'MINI', 'direction': 'SELL', 'quantity': 100.0, 'size': 100.0, 'price': 520.59888, 'fill_price': 520.59888, 'commission': 52.059888, 'pnl': 0.0, 'realized_pnl': 0.0, 'entry_time': datetime.datetime(2025, 5, 4, 14, 8, 10, 224905), 'exit_time': datetime.datetime(2025, 5, 4, 14, 8, 10, 224905), 'entry_price': 520.59888, 'exit_price': 520.59888, 'trade_value': 52059.888}
2025-05-04 14:08:10,262 - src.risk.portfolio.portfolio - INFO - Last trade: {'id': 'c9d4f1ed-3d60-46a7-8c99-cd965c106ed0', 'timestamp': datetime.datetime(2025, 5, 4, 14, 8, 10, 251981), 'symbol': 'MINI', 'direction': 'BUY', 'quantity': 100.0, 'size': 100.0, 'price': 521.9013799999999, 'fill_price': 521.9013799999999, 'commission': 52.19013799999999, 'pnl': 0.0, 'realized_pnl': 0.0, 'entry_time': datetime.datetime(2025, 5, 4, 14, 8, 10, 251981), 'exit_time': datetime.datetime(2025, 5, 4, 14, 8, 10, 251981), 'entry_price': 521.9013799999999, 'exit_price': 521.9013799999999, 'trade_value': 52190.13799999999}
2025-05-04 14:08:10,262 - src.risk.portfolio.portfolio - INFO - Returning 23 validated trades
2025-05-04 14:08:10,262 - __main__ - INFO - Verifying trade tracking in portfolio
2025-05-04 14:08:10,262 - src.risk.portfolio.portfolio - INFO - === TRADE TRACKING DEBUG ===
2025-05-04 14:08:10,262 - src.risk.portfolio.portfolio - INFO - Portfolio trade list ID: 4449406848
2025-05-04 14:08:10,262 - src.risk.portfolio.portfolio - INFO - Trade count: 23
2025-05-04 14:08:10,262 - src.risk.portfolio.portfolio - INFO - First trade: a1963a8e-2635-490f-8193-24a6bea67753 - MINI
2025-05-04 14:08:10,262 - src.risk.portfolio.portfolio - INFO - Last trade: c9d4f1ed-3d60-46a7-8c99-cd965c106ed0 - MINI
2025-05-04 14:08:10,262 - src.risk.portfolio.portfolio - INFO - Total PnL from trades: -1166.68
2025-05-04 14:08:10,262 - src.risk.portfolio.portfolio - INFO - === END TRADE TRACKING DEBUG ===
2025-05-04 14:08:10,262 - __main__ - INFO - Portfolio reports 23 trades
2025-05-04 14:08:10,262 - src.risk.portfolio.portfolio - INFO - get_recent_trades called, self.trades has 23 items
2025-05-04 14:08:10,262 - src.risk.portfolio.portfolio - INFO - Trade list object ID: 4449406848
2025-05-04 14:08:10,262 - src.risk.portfolio.portfolio - INFO - First trade: {'id': 'a1963a8e-2635-490f-8193-24a6bea67753', 'timestamp': datetime.datetime(2025, 5, 4, 14, 8, 10, 224905), 'symbol': 'MINI', 'direction': 'SELL', 'quantity': 100.0, 'size': 100.0, 'price': 520.59888, 'fill_price': 520.59888, 'commission': 52.059888, 'pnl': 0.0, 'realized_pnl': 0.0, 'entry_time': datetime.datetime(2025, 5, 4, 14, 8, 10, 224905), 'exit_time': datetime.datetime(2025, 5, 4, 14, 8, 10, 224905), 'entry_price': 520.59888, 'exit_price': 520.59888, 'trade_value': 52059.888}
2025-05-04 14:08:10,262 - src.risk.portfolio.portfolio - INFO - Last trade: {'id': 'c9d4f1ed-3d60-46a7-8c99-cd965c106ed0', 'timestamp': datetime.datetime(2025, 5, 4, 14, 8, 10, 251981), 'symbol': 'MINI', 'direction': 'BUY', 'quantity': 100.0, 'size': 100.0, 'price': 521.9013799999999, 'fill_price': 521.9013799999999, 'commission': 52.19013799999999, 'pnl': 0.0, 'realized_pnl': 0.0, 'entry_time': datetime.datetime(2025, 5, 4, 14, 8, 10, 251981), 'exit_time': datetime.datetime(2025, 5, 4, 14, 8, 10, 251981), 'entry_price': 521.9013799999999, 'exit_price': 521.9013799999999, 'trade_value': 52190.13799999999}
2025-05-04 14:08:10,262 - src.risk.portfolio.portfolio - INFO - Returning 23 validated trades
2025-05-04 14:08:10,262 - __main__ - INFO - Results contain 23 trades
2025-05-04 14:08:10,262 - __main__ - INFO - Metrics report 23 trades
2025-05-04 14:08:10,262 - __main__ - INFO - Trade tracking verification complete
